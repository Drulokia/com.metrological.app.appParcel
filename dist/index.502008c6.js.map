{"mappings":"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","sources":["src/working/js/appBundle.js"],"sourcesContent":["/**\n * App version: 1.0.0\n * SDK version: 5.2.0\n * CLI version: 2.8.1\n *\n * Generated: Tue, 06 Dec 2022 10:54:30 GMT\n */\n\nvar APP_com_metrological_app_parcelapp = (function () {\n  'use strict';\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const settings = {};\n  const subscribers = {};\n  const initSettings = (appSettings, platformSettings) => {\n    settings['app'] = appSettings;\n    settings['platform'] = platformSettings;\n    settings['user'] = {};\n  };\n\n  const publish = (key, value) => {\n    subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value));\n  };\n\n  const dotGrab = function () {\n    let obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let key = arguments.length > 1 ? arguments[1] : undefined;\n    if (obj === null) return undefined;\n    const keys = key.split('.');\n\n    for (let i = 0; i < keys.length; i++) {\n      obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {};\n    }\n\n    return typeof obj === 'object' && obj !== null ? Object.keys(obj).length ? obj : undefined : obj;\n  };\n\n  var Settings$1 = {\n    get(type, key) {\n      let fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n      const val = dotGrab(settings[type], key);\n      return val !== undefined ? val : fallback;\n    },\n\n    has(type, key) {\n      return !!this.get(type, key);\n    },\n\n    set(key, value) {\n      settings['user'][key] = value;\n      publish(key, value);\n    },\n\n    subscribe(key, callback) {\n      subscribers[key] = subscribers[key] || [];\n      subscribers[key].push(callback);\n    },\n\n    unsubscribe(key, callback) {\n      if (callback) {\n        const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback);\n        index > -1 && subscribers[key].splice(index, 1);\n      } else {\n        if (key in subscribers) {\n          subscribers[key] = [];\n        }\n      }\n    },\n\n    clearSubscribers() {\n      for (const key of Object.getOwnPropertyNames(subscribers)) {\n        delete subscribers[key];\n      }\n    }\n\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  const prepLog = (type, args) => {\n    const colors = {\n      Info: 'green',\n      Debug: 'gray',\n      Warn: 'orange',\n      Error: 'red'\n    };\n    args = Array.from(args);\n    return ['%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type), 'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px', args];\n  };\n\n  var Log$1 = {\n    info() {\n      Settings$1.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments));\n    },\n\n    debug() {\n      Settings$1.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments));\n    },\n\n    error() {\n      Settings$1.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments));\n    },\n\n    warn() {\n      Settings$1.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments));\n    }\n\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  var Lightning$1 = window.lng;\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class ColorShift extends Lightning$1.shaders.WebGLDefaultShader {\n    set brightness(v) {\n      this._brightness = (v - 50) / 100;\n      this.redraw();\n    }\n\n    set contrast(v) {\n      this._contrast = (v + 50) / 100;\n      this.redraw();\n    }\n\n    set gamma(v) {\n      this._gamma = (v + 50) / 100;\n      this.redraw();\n    }\n\n    setupUniforms(operation) {\n      super.setupUniforms(operation);\n      const gl = this.gl;\n\n      this._setUniform('colorAdjust', [this._brightness || 0.0, this._contrast || 1.0, this._gamma || 1.0], gl.uniform3fv);\n    }\n\n  }\n  ColorShift.before = \"\\n    #ifdef GL_ES\\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\\n    precision highp float;\\n    # else\\n    precision lowp float;\\n    # endif\\n    #endif\\n        \\n    varying vec2 vTextureCoord;\\n    varying vec4 vColor;\\n    uniform sampler2D uSampler;\\n    uniform vec3 colorAdjust;\\n    \\n    const mat3 RGBtoOpponentMat = mat3(0.2814, -0.0971, -0.0930, 0.6938, 0.1458,-0.2529, 0.0638, -0.0250, 0.4665);\\n    const mat3 OpponentToRGBMat = mat3(1.1677, 0.9014, 0.7214, -6.4315, 2.5970, 0.1257, -0.5044, 0.0159, 2.0517);    \\n\";\n  ColorShift.after = \"    \\n    vec3 brightnessContrast(vec3 value, float brightness, float contrast)\\n    {\\n        return (value - 0.5) * contrast + 0.5 + brightness;\\n    }   \\n    \\n    vec3 updateGamma(vec3 value, float param)\\n    {\\n        return vec3(pow(abs(value.r), param),pow(abs(value.g), param),pow(abs(value.b), param));\\n    } \\n       \\n    void main(void){\\n        vec4 fragColor = texture2D(uSampler, vTextureCoord);        \\n        vec4 color = filter(fragColor) * vColor;       \\n        \\n        vec3 bc = brightnessContrast(color.rgb,colorAdjust[0],colorAdjust[1]);        \\n        vec3 ga = updateGamma(bc.rgb, colorAdjust[2]);  \\n              \\n        gl_FragColor = vec4(ga.rgb, color.a);          \\n    }    \\n\";\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class ProtanopiaShader extends ColorShift {}\n  ProtanopiaShader.fragmentShaderSource = \"\\n    \".concat(ColorShift.before, \"    \\n    vec4 vision(vec4 color)\\n    {\\n        vec4 r = vec4( 0.20,  0.99, -0.19, 0.0);\\n        vec4 g = vec4( 0.16,  0.79,  0.04, 0.0);\\n        vec4 b = vec4( 0.01, -0.01,  1.00, 0.0);\\n       \\n        return vec4(dot(color, r), dot(color, g), dot(color, b), color.a);\\t\\n    }\\n    \\n    vec4 filter( vec4 color )\\n    {   \\n        vec3 opponentColor = RGBtoOpponentMat * vec3(color.r, color.g, color.b);\\n        opponentColor.x -= opponentColor.y * 1.5; \\n        vec3 rgbColor = OpponentToRGBMat * opponentColor;\\n        return vision(vec4(rgbColor.r, rgbColor.g, rgbColor.b, color.a));      \\n    }    \\n    \").concat(ColorShift.after, \" \\n\");\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class DeuteranopiaShader extends ColorShift {}\n  DeuteranopiaShader.fragmentShaderSource = \"\\n    \".concat(ColorShift.before, \"\\n    vec4 vision(vec4 color)\\n    {\\n        vec4 r = vec4( 0.43,  0.72, -0.15, 0.0 );\\n        vec4 g = vec4( 0.34,  0.57,  0.09, 0.0 );\\n        vec4 b = vec4(-0.02,  0.03,  1.00, 0.0 );\\n       \\n        return vec4(dot(color, r), dot(color, g), dot(color, b), color.a);\\t\\n    }\\n       \\n    vec4 filter( vec4 color )\\n    {   \\n        vec3 opponentColor = RGBtoOpponentMat * vec3(color.r, color.g, color.b);\\n        opponentColor.x -= opponentColor.y * 1.5; \\n        vec3 rgbColor = OpponentToRGBMat * opponentColor;\\n        return vision(vec4(rgbColor.r, rgbColor.g, rgbColor.b, color.a));    \\n    }\\n    \").concat(ColorShift.after, \"    \\n\");\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class TritanopiaShader extends ColorShift {}\n  TritanopiaShader.fragmentShaderSource = \"\\n    \".concat(ColorShift.before, \"    \\n    vec4 vision(vec4 color)\\n    {\\n        vec4 r = vec4( 0.97,  0.11, -0.08, 0.0 );\\n        vec4 g = vec4( 0.02,  0.82,  0.16, 0.0 );\\n        vec4 b = vec4(-0.06,  0.88,  0.18, 0.0 );\\n       \\n        return vec4(dot(color, r), dot(color, g), dot(color, b), color.a);\\t\\n    }   \\n    \\n    vec4 filter( vec4 color )\\n    {   \\n        vec3 opponentColor = RGBtoOpponentMat * vec3(color.r, color.g, color.b);\\n        opponentColor.x -= ((3.0 * opponentColor.z) - opponentColor.y) * 0.25;\\n        vec3 rgbColor = OpponentToRGBMat * opponentColor;\\n        return vision(vec4(rgbColor.r, rgbColor.g, rgbColor.b, color.a));\\n    }   \\n    \").concat(ColorShift.after, \" \\n\");\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class NeutralShader extends ColorShift {}\n  NeutralShader.fragmentShaderSource = \"\\n    \".concat(ColorShift.before, \"\\n    vec4 filter( vec4 color )\\n    {\\n        return color;\\n    }\\n    \").concat(ColorShift.after, \"\\n\");\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class MonochromacyShader extends ColorShift {}\n  MonochromacyShader.fragmentShaderSource = \"\\n    \".concat(ColorShift.before, \"\\n    vec4 filter( vec4 color )\\n    {   \\n        float grey = dot(color.rgb, vec3(0.299, 0.587, 0.114));\\n        return vec4(vec3(grey, grey, grey), 1.0 ); \\n    }\\n    \").concat(ColorShift.after, \"\\n\");\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const colorshiftShader = type => {\n    const shadersMap = {\n      normal: NeutralShader,\n      monochromacy: MonochromacyShader,\n      deuteranopia: DeuteranopiaShader,\n      tritanopia: TritanopiaShader,\n      protanopia: ProtanopiaShader\n    };\n    type = typeof type === 'string' && type.toLowerCase() || null;\n    return Object.keys(shadersMap).indexOf(type) > -1 ? shadersMap[type] : false;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  var Accessibility = {\n    colorshift(component) {\n      let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      let config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        brightness: 50,\n        contrast: 50,\n        gamma: 50\n      };\n      config = { ...{\n          brightness: 50,\n          contrast: 50,\n          gamma: 50\n        },\n        ...config\n      };\n      const shader = type && colorshiftShader(type);\n\n      if (shader) {\n        Log$1.info('Accessibility Colorshift', type, config);\n        component.rtt = true;\n        component.shader = {\n          type: shader,\n          ...config\n        };\n      } else {\n        Log$1.info('Accessibility Colorshift', 'Disabled');\n        component.rtt = false;\n        component.shader = null;\n      }\n    }\n\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let Log;\n  let Settings;\n  let ApplicationInstance$1;\n  let Ads$1;\n  let Lightning;\n  const initLightningSdkPlugin = {\n    set log(v) {\n      Log = v;\n    },\n\n    set settings(v) {\n      Settings = v;\n    },\n\n    set ads(v) {\n      Ads$1 = v;\n    },\n\n    set lightning(v) {\n      Lightning = v;\n    },\n\n    set appInstance(v) {\n      ApplicationInstance$1 = v;\n    }\n\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const initMetrics = config => {\n    sendMetric = config.sendMetric;\n  };\n\n  let sendMetric = (type, event, params) => {\n    Log.info('Sending metric', type, event, params);\n  }; // available metric per category\n\n\n  const metrics$1 = {\n    app: ['launch', 'loaded', 'ready', 'close'],\n    page: ['view', 'leave'],\n    user: ['click', 'input'],\n    media: ['abort', 'canplay', 'ended', 'pause', 'play', // with some videos there occur almost constant suspend events ... should investigate\n    // 'suspend',\n    'volumechange', 'waiting', 'seeking', 'seeked']\n  }; // error metric function (added to each category)\n\n  const errorMetric = function (type, message, code, visible) {\n    let params = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    params = {\n      params,\n      ...{\n        message,\n        code,\n        visible\n      }\n    };\n    sendMetric(type, 'error', params);\n  };\n\n  const Metric = function (type, events) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return events.reduce((obj, event) => {\n      obj[event] = function (name) {\n        let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        params = { ...options,\n          ...(name ? {\n            name\n          } : {}),\n          ...params\n        };\n        sendMetric(type, event, params);\n      };\n\n      return obj;\n    }, {\n      error(message, code, params) {\n        errorMetric(type, message, code, params);\n      },\n\n      event(name, params) {\n        sendMetric(type, name, params);\n      }\n\n    });\n  };\n\n  const Metrics = types => {\n    return Object.keys(types).reduce((obj, type) => {\n      // media metric works a bit different!\n      // it's a function that accepts a url and returns an object with the available metrics\n      // url is automatically passed as a param in every metric\n      type === 'media' ? obj[type] = url => Metric(type, types[type], {\n        url\n      }) : obj[type] = Metric(type, types[type]);\n      return obj;\n    }, {\n      error: errorMetric,\n      event: sendMetric\n    });\n  };\n\n  var Metrics$1 = Metrics(metrics$1);\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  const formatLocale = locale => {\n    if (locale && locale.length === 2) {\n      return \"\".concat(locale.toLowerCase(), \"-\").concat(locale.toUpperCase());\n    } else {\n      return locale;\n    }\n  };\n\n  const getLocale = defaultValue => {\n    if ('language' in navigator) {\n      const locale = formatLocale(navigator.language);\n      return Promise.resolve(locale);\n    } else {\n      return Promise.resolve(defaultValue);\n    }\n  };\n  const getLanguage = defaultValue => {\n    if ('language' in navigator) {\n      const language = formatLocale(navigator.language).slice(0, 2);\n      return Promise.resolve(language);\n    } else {\n      return Promise.resolve(defaultValue);\n    }\n  };\n  const getCountryCode = defaultValue => {\n    if ('language' in navigator) {\n      const countryCode = formatLocale(navigator.language).slice(3, 5);\n      return Promise.resolve(countryCode);\n    } else {\n      return Promise.resolve(defaultValue);\n    }\n  };\n\n  const hasOrAskForGeoLocationPermission = () => {\n    return new Promise(resolve => {\n      // force to prompt for location permission\n      if (Settings.get('platform', 'forceBrowserGeolocation') === true) resolve(true);\n\n      if ('permissions' in navigator && typeof navigator.permissions.query === 'function') {\n        navigator.permissions.query({\n          name: 'geolocation'\n        }).then(status => {\n          resolve(status.state === 'granted' || status.status === 'granted');\n        });\n      } else {\n        resolve(false);\n      }\n    });\n  };\n\n  const getLatLon = defaultValue => {\n    return new Promise(resolve => {\n      hasOrAskForGeoLocationPermission().then(granted => {\n        if (granted === true) {\n          if ('geolocation' in navigator) {\n            navigator.geolocation.getCurrentPosition( // success\n            result => result && result.coords && resolve([result.coords.latitude, result.coords.longitude]), // error\n            () => resolve(defaultValue), // options\n            {\n              enableHighAccuracy: true,\n              timeout: 5000,\n              maximumAge: 0\n            });\n          } else {\n            return queryForLatLon().then(result => resolve(result || defaultValue));\n          }\n        } else {\n          return queryForLatLon().then(result => resolve(result || defaultValue));\n        }\n      });\n    });\n  };\n\n  const queryForLatLon = () => {\n    return new Promise(resolve => {\n      fetch('https://geolocation-db.com/json/').then(response => response.json()).then(_ref => {\n        let {\n          latitude,\n          longitude\n        } = _ref;\n        return latitude && longitude ? resolve([latitude, longitude]) : resolve(false);\n      }).catch(() => resolve(false));\n    });\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const defaultProfile = {\n    ageRating: 'adult',\n    city: 'New York',\n    zipCode: '27505',\n    countryCode: () => getCountryCode('US'),\n    ip: '127.0.0.1',\n    household: 'b2244e9d4c04826ccd5a7b2c2a50e7d4',\n    language: () => getLanguage('en'),\n    latlon: () => getLatLon([40.7128, 74.006]),\n    locale: () => getLocale('en-US'),\n    mac: '00:00:00:00:00:00',\n    operator: 'metrological',\n    platform: 'metrological',\n    packages: [],\n    uid: 'ee6723b8-7ab3-462c-8d93-dbf61227998e',\n    stbType: 'metrological'\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  let getInfo = key => {\n    const profile = { ...defaultProfile,\n      ...Settings.get('platform', 'profile')\n    };\n    return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key]);\n  };\n\n  let setInfo = (key, params) => {\n    if (key in defaultProfile) return defaultProfile[key] = params;\n  };\n\n  const initProfile = config => {\n    getInfo = config.getInfo ? config.getInfo : getInfo;\n    setInfo = config.setInfo ? config.setInfo : setInfo;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const initPurchase = config => {\n    if (config.billingUrl) ;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const defaultChannels = [{\n    number: 1,\n    name: 'Metro News 1',\n    description: 'New York Cable News Channel',\n    entitled: true,\n    program: {\n      title: 'The Morning Show',\n      description: \"New York's best morning show\",\n      startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(),\n      // started 5 minutes ago\n      duration: 60 * 30,\n      // 30 minutes\n      ageRating: 0\n    }\n  }, {\n    number: 2,\n    name: 'MTV',\n    description: 'Music Television',\n    entitled: true,\n    program: {\n      title: 'Beavis and Butthead',\n      description: 'American adult animated sitcom created by Mike Judge',\n      startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(),\n      // started 20 minutes ago\n      duration: 60 * 45,\n      // 45 minutes\n      ageRating: 18\n    }\n  }, {\n    number: 3,\n    name: 'NBC',\n    description: 'NBC TV Network',\n    entitled: false,\n    program: {\n      title: 'The Tonight Show Starring Jimmy Fallon',\n      description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n      startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(),\n      // started 10 minutes ago\n      duration: 60 * 60,\n      // 1 hour\n      ageRating: 10\n    }\n  }];\n  const channels = () => Settings.get('platform', 'tv', defaultChannels);\n  const randomChannel = () => channels()[~~(channels.length * Math.random())];\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let currentChannel;\n  const callbacks = {};\n\n  const emit$1 = function (event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    callbacks[event] && callbacks[event].forEach(cb => {\n      cb.apply(null, args);\n    });\n  }; // local mock methods\n\n\n  let methods = {\n    getChannel() {\n      if (!currentChannel) currentChannel = randomChannel();\n      return new Promise((resolve, reject) => {\n        if (currentChannel) {\n          const channel = { ...currentChannel\n          };\n          delete channel.program;\n          resolve(channel);\n        } else {\n          reject('No channel found');\n        }\n      });\n    },\n\n    getProgram() {\n      if (!currentChannel) currentChannel = randomChannel();\n      return new Promise((resolve, reject) => {\n        currentChannel.program ? resolve(currentChannel.program) : reject('No program found');\n      });\n    },\n\n    setChannel(number) {\n      return new Promise((resolve, reject) => {\n        if (number) {\n          const newChannel = channels().find(c => c.number === number);\n\n          if (newChannel) {\n            currentChannel = newChannel;\n            const channel = { ...currentChannel\n            };\n            delete channel.program;\n            emit$1('channelChange', channel);\n            resolve(channel);\n          } else {\n            reject('Channel not found');\n          }\n        } else {\n          reject('No channel number supplied');\n        }\n      });\n    }\n\n  };\n  const initTV = config => {\n    methods = {};\n\n    if (config.getChannel && typeof config.getChannel === 'function') {\n      methods.getChannel = config.getChannel;\n    }\n\n    if (config.getProgram && typeof config.getProgram === 'function') {\n      methods.getProgram = config.getProgram;\n    }\n\n    if (config.setChannel && typeof config.setChannel === 'function') {\n      methods.setChannel = config.setChannel;\n    }\n\n    if (config.emit && typeof config.emit === 'function') {\n      config.emit(emit$1);\n    }\n  }; // public API\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  const initPin = config => {\n    if (config.submit && typeof config.submit === 'function') ;\n\n    if (config.check && typeof config.check === 'function') ;\n  };\n\n  var executeAsPromise = (function (method) {\n    let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let result;\n\n    if (method && typeof method === 'function') {\n      try {\n        result = method.apply(context, args);\n      } catch (e) {\n        result = e;\n      }\n    } else {\n      result = method;\n    } // if it looks like a duck .. ehm ... promise and talks like a promise, let's assume it's a promise\n\n\n    if (result !== null && typeof result === 'object' && result.then && typeof result.then === 'function') {\n      return result;\n    } // otherwise make it into a promise\n    else {\n      return new Promise((resolve, reject) => {\n        if (result instanceof Error) {\n          reject(result);\n        } else {\n          resolve(result);\n        }\n      });\n    }\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  var events$1 = {\n    abort: 'Abort',\n    canplay: 'CanPlay',\n    canplaythrough: 'CanPlayThrough',\n    durationchange: 'DurationChange',\n    emptied: 'Emptied',\n    encrypted: 'Encrypted',\n    ended: 'Ended',\n    error: 'Error',\n    interruptbegin: 'InterruptBegin',\n    interruptend: 'InterruptEnd',\n    loadeddata: 'LoadedData',\n    loadedmetadata: 'LoadedMetadata',\n    loadstart: 'LoadStart',\n    pause: 'Pause',\n    play: 'Play',\n    playing: 'Playing',\n    progress: 'Progress',\n    ratechange: 'Ratechange',\n    seeked: 'Seeked',\n    seeking: 'Seeking',\n    stalled: 'Stalled',\n    // suspend: 'Suspend', // this one is called a looooot for some videos\n    timeupdate: 'TimeUpdate',\n    volumechange: 'VolumeChange',\n    waiting: 'Waiting'\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  var autoSetupMixin = (function (sourceObject) {\n    let setup = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n    let ready = false;\n\n    const doSetup = () => {\n      if (ready === false) {\n        setup();\n        ready = true;\n      }\n    };\n\n    return Object.keys(sourceObject).reduce((obj, key) => {\n      if (typeof sourceObject[key] === 'function') {\n        obj[key] = function () {\n          doSetup();\n          return sourceObject[key].apply(sourceObject, arguments);\n        };\n      } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n        obj.__defineGetter__(key, function () {\n          doSetup();\n          return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject);\n        });\n      } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n        obj.__defineSetter__(key, function () {\n          doSetup();\n          return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(sourceObject, arguments);\n        });\n      } else {\n        obj[key] = sourceObject[key];\n      }\n\n      return obj;\n    }, {});\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let timeout = null;\n  var easeExecution = ((cb, delay) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      cb();\n    }, delay);\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  var VideoTexture = (() => {\n    return class VideoTexture extends Lightning.Component {\n      static _template() {\n        return {\n          Video: {\n            alpha: 1,\n            visible: false,\n            pivot: 0.5,\n            texture: {\n              type: Lightning.textures.StaticTexture,\n              options: {}\n            }\n          }\n        };\n      }\n\n      set videoEl(v) {\n        this._videoEl = v;\n      }\n\n      get videoEl() {\n        return this._videoEl;\n      }\n\n      get videoView() {\n        return this.tag('Video');\n      }\n\n      get videoTexture() {\n        return this.videoView.texture;\n      }\n\n      get isVisible() {\n        return this.videoView.alpha === 1 && this.videoView.visible === true;\n      }\n\n      _init() {\n        this._createVideoTexture();\n      }\n\n      _createVideoTexture() {\n        const stage = this.stage;\n        const gl = stage.gl;\n        const glTexture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, glTexture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        this.videoTexture.options = {\n          source: glTexture,\n          w: this.videoEl.width,\n          h: this.videoEl.height\n        };\n        this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision();\n        this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision();\n      }\n\n      start() {\n        const stage = this.stage;\n        this._lastTime = 0;\n\n        if (!this._updateVideoTexture) {\n          this._updateVideoTexture = () => {\n            if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n              const gl = stage.gl;\n              const currentTime = new Date().getTime();\n              const getVideoPlaybackQuality = this.videoEl.getVideoPlaybackQuality(); // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n              // We'll fallback to fixed 30fps in this case.\n              // As 'webkitDecodedFrameCount' is about to deprecate, check for the 'totalVideoFrames'\n\n              const frameCount = getVideoPlaybackQuality ? getVideoPlaybackQuality.totalVideoFrames : this.videoEl.webkitDecodedFrameCount;\n              const mustUpdate = frameCount ? this._lastFrame !== frameCount : this._lastTime < currentTime - 30;\n\n              if (mustUpdate) {\n                this._lastTime = currentTime;\n                this._lastFrame = frameCount;\n\n                try {\n                  gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n                  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n                  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl);\n                  this._lastFrame = this.videoEl.webkitDecodedFrameCount;\n                  this.videoView.visible = true;\n                  this.videoTexture.options.w = this.videoEl.width;\n                  this.videoTexture.options.h = this.videoEl.height;\n                  const expectedAspectRatio = this.videoView.w / this.videoView.h;\n                  const realAspectRatio = this.videoEl.width / this.videoEl.height;\n\n                  if (expectedAspectRatio > realAspectRatio) {\n                    this.videoView.scaleX = realAspectRatio / expectedAspectRatio;\n                    this.videoView.scaleY = 1;\n                  } else {\n                    this.videoView.scaleY = expectedAspectRatio / realAspectRatio;\n                    this.videoView.scaleX = 1;\n                  }\n                } catch (e) {\n                  Log.error('texImage2d video', e);\n                  this.stop();\n                }\n\n                this.videoTexture.source.forceRenderUpdate();\n              }\n            }\n          };\n        }\n\n        if (!this._updatingVideoTexture) {\n          stage.on('frameStart', this._updateVideoTexture);\n          this._updatingVideoTexture = true;\n        }\n      }\n\n      stop() {\n        const stage = this.stage;\n        stage.removeListener('frameStart', this._updateVideoTexture);\n        this._updatingVideoTexture = false;\n        this.videoView.visible = false;\n\n        if (this.videoTexture.options.source) {\n          const gl = stage.gl;\n          gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n          gl.clearColor(0, 0, 0, 1);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n      }\n\n      position(top, left) {\n        this.videoView.patch({\n          x: left,\n          y: top\n        });\n      }\n\n      size(width, height) {\n        this.videoView.patch({\n          w: width,\n          h: height\n        });\n      }\n\n      show() {\n        this.videoView.alpha = 1;\n      }\n\n      hide() {\n        this.videoView.alpha = 0;\n      }\n\n    };\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let mediaUrl$1 = url => url;\n  let videoEl;\n  let videoTexture;\n  let metrics;\n  let consumer$1;\n  let precision = 1;\n  let textureMode = false;\n  const initVideoPlayer = config => {\n    if (config.mediaUrl) {\n      mediaUrl$1 = config.mediaUrl;\n    }\n  }; // todo: add this in a 'Registry' plugin\n  // to be able to always clean this up on app close\n\n  let eventHandlers = {};\n  const state$1 = {\n    adsEnabled: false,\n    playing: false,\n    _playingAds: false,\n\n    get playingAds() {\n      return this._playingAds;\n    },\n\n    set playingAds(val) {\n      if (this._playingAds !== val) {\n        this._playingAds = val;\n        fireOnConsumer$1(val === true ? 'AdStart' : 'AdEnd');\n      }\n    },\n\n    skipTime: false,\n    playAfterSeek: null\n  };\n  const hooks = {\n    play() {\n      state$1.playing = true;\n    },\n\n    pause() {\n      state$1.playing = false;\n    },\n\n    seeked() {\n      state$1.playAfterSeek === true && videoPlayerPlugin.play();\n      state$1.playAfterSeek = null;\n    },\n\n    abort() {\n      deregisterEventListeners();\n    }\n\n  };\n\n  const withPrecision = val => Math.round(precision * val) + 'px';\n\n  const fireOnConsumer$1 = (event, args) => {\n    if (consumer$1) {\n      consumer$1.fire('$videoPlayer' + event, args, videoEl.currentTime);\n      consumer$1.fire('$videoPlayerEvent', event, args, videoEl.currentTime);\n    }\n  };\n\n  const fireHook = (event, args) => {\n    hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args);\n  };\n\n  let customLoader = null;\n  let customUnloader = null;\n\n  const loader$1 = (url, videoEl, config) => {\n    return customLoader && typeof customLoader === 'function' ? customLoader(url, videoEl, config) : new Promise(resolve => {\n      url = mediaUrl$1(url);\n      videoEl.setAttribute('src', url);\n      videoEl.load();\n      resolve();\n    });\n  };\n\n  const unloader = videoEl => {\n    return customUnloader && typeof customUnloader === 'function' ? customUnloader(videoEl) : new Promise(resolve => {\n      videoEl.removeAttribute('src');\n      videoEl.load();\n      resolve();\n    });\n  };\n\n  const setupVideoTag = () => {\n    const videoEls = document.getElementsByTagName('video');\n\n    if (videoEls && videoEls.length) {\n      return videoEls[0];\n    } else {\n      const videoEl = document.createElement('video');\n      const platformSettingsWidth = Settings.get('platform', 'width') ? Settings.get('platform', 'width') : 1920;\n      const platformSettingsHeight = Settings.get('platform', 'height') ? Settings.get('platform', 'height') : 1080;\n      videoEl.setAttribute('id', 'video-player');\n      videoEl.setAttribute('width', withPrecision(platformSettingsWidth));\n      videoEl.setAttribute('height', withPrecision(platformSettingsHeight));\n      videoEl.style.position = 'absolute';\n      videoEl.style.zIndex = '1';\n      videoEl.style.display = 'none';\n      videoEl.style.visibility = 'hidden';\n      videoEl.style.top = withPrecision(0);\n      videoEl.style.left = withPrecision(0);\n      videoEl.style.width = withPrecision(platformSettingsWidth);\n      videoEl.style.height = withPrecision(platformSettingsHeight);\n      document.body.appendChild(videoEl);\n      return videoEl;\n    }\n  };\n  const setUpVideoTexture = () => {\n    if (!ApplicationInstance$1.tag('VideoTexture')) {\n      const el = ApplicationInstance$1.stage.c({\n        type: VideoTexture(),\n        ref: 'VideoTexture',\n        zIndex: 0,\n        videoEl\n      });\n      ApplicationInstance$1.childList.addAt(el, 0);\n    }\n\n    return ApplicationInstance$1.tag('VideoTexture');\n  };\n\n  const registerEventListeners = () => {\n    Log.info('VideoPlayer', 'Registering event listeners');\n    Object.keys(events$1).forEach(event => {\n      const handler = e => {\n        // Fire a metric for each event (if it exists on the metrics object)\n        if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n          metrics[event]({\n            currentTime: videoEl.currentTime\n          });\n        } // fire an internal hook\n\n\n        fireHook(event, {\n          videoElement: videoEl,\n          event: e\n        }); // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n\n        fireOnConsumer$1(events$1[event], {\n          videoElement: videoEl,\n          event: e\n        });\n      };\n\n      eventHandlers[event] = handler;\n      videoEl.addEventListener(event, handler);\n    });\n  };\n\n  const deregisterEventListeners = () => {\n    Log.info('VideoPlayer', 'Deregistering event listeners');\n    Object.keys(eventHandlers).forEach(event => {\n      videoEl.removeEventListener(event, eventHandlers[event]);\n    });\n    eventHandlers = {};\n  };\n\n  const videoPlayerPlugin = {\n    consumer(component) {\n      consumer$1 = component;\n    },\n\n    loader(loaderFn) {\n      customLoader = loaderFn;\n    },\n\n    unloader(unloaderFn) {\n      customUnloader = unloaderFn;\n    },\n\n    position() {\n      let top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      let left = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      videoEl.style.left = withPrecision(left);\n      videoEl.style.top = withPrecision(top);\n\n      if (textureMode === true) {\n        videoTexture.position(top, left);\n      }\n    },\n\n    size() {\n      let width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1920;\n      let height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1080;\n      videoEl.style.width = withPrecision(width);\n      videoEl.style.height = withPrecision(height);\n      videoEl.width = parseFloat(videoEl.style.width);\n      videoEl.height = parseFloat(videoEl.style.height);\n\n      if (textureMode === true) {\n        videoTexture.size(width, height);\n      }\n    },\n\n    area() {\n      let top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      let right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1920;\n      let bottom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1080;\n      let left = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      this.position(top, left);\n      this.size(right - left, bottom - top);\n    },\n\n    open(url) {\n      let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!this.canInteract) return;\n      metrics = Metrics$1.media(url);\n      this.hide();\n      deregisterEventListeners();\n\n      if (this.src == url) {\n        this.clear().then(this.open(url, config));\n      } else {\n        const adConfig = {\n          enabled: state$1.adsEnabled,\n          duration: 300\n        };\n\n        if (config.videoId) {\n          adConfig.caid = config.videoId;\n        }\n\n        Ads$1.get(adConfig, consumer$1).then(ads => {\n          state$1.playingAds = true;\n          ads.prerolls().then(() => {\n            state$1.playingAds = false;\n            loader$1(url, videoEl, config).then(() => {\n              registerEventListeners();\n              this.show();\n              this.play();\n            }).catch(e => {\n              fireOnConsumer$1('error', {\n                videoElement: videoEl,\n                event: e\n              });\n            });\n          });\n        });\n      }\n    },\n\n    reload() {\n      if (!this.canInteract) return;\n      const url = videoEl.getAttribute('src');\n      this.close();\n      this.open(url);\n    },\n\n    close() {\n      Ads$1.cancel();\n\n      if (state$1.playingAds) {\n        state$1.playingAds = false;\n        Ads$1.stop(); // call self in next tick\n\n        setTimeout(() => {\n          this.close();\n        });\n      }\n\n      if (!this.canInteract) return;\n      this.clear();\n      this.hide();\n      deregisterEventListeners();\n    },\n\n    clear() {\n      if (!this.canInteract) return; // pause the video first to disable sound\n\n      this.pause();\n      if (textureMode === true) videoTexture.stop();\n      return unloader(videoEl).then(() => {\n        fireOnConsumer$1('Clear', {\n          videoElement: videoEl\n        });\n      });\n    },\n\n    play() {\n      if (!this.canInteract) return;\n      if (textureMode === true) videoTexture.start();\n      executeAsPromise(videoEl.play, null, videoEl).catch(e => {\n        fireOnConsumer$1('error', {\n          videoElement: videoEl,\n          event: e\n        });\n      });\n    },\n\n    pause() {\n      if (!this.canInteract) return;\n      videoEl.pause();\n    },\n\n    playPause() {\n      if (!this.canInteract) return;\n      this.playing === true ? this.pause() : this.play();\n    },\n\n    mute() {\n      let muted = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (!this.canInteract) return;\n      videoEl.muted = muted;\n    },\n\n    loop() {\n      let looped = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      videoEl.loop = looped;\n    },\n\n    seek(time) {\n      if (!this.canInteract) return;\n      if (!this.src) return; // define whether should continue to play after seek is complete (in seeked hook)\n\n      if (state$1.playAfterSeek === null) {\n        state$1.playAfterSeek = !!state$1.playing;\n      } // pause before actually seeking\n\n\n      this.pause(); // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n\n      videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1));\n    },\n\n    skip(seconds) {\n      if (!this.canInteract) return;\n      if (!this.src) return;\n      state$1.skipTime = (state$1.skipTime || videoEl.currentTime) + seconds;\n      easeExecution(() => {\n        this.seek(state$1.skipTime);\n        state$1.skipTime = false;\n      }, 300);\n    },\n\n    show() {\n      if (!this.canInteract) return;\n\n      if (textureMode === true) {\n        videoTexture.show();\n      } else {\n        videoEl.style.display = 'block';\n        videoEl.style.visibility = 'visible';\n      }\n    },\n\n    hide() {\n      if (!this.canInteract) return;\n\n      if (textureMode === true) {\n        videoTexture.hide();\n      } else {\n        videoEl.style.display = 'none';\n        videoEl.style.visibility = 'hidden';\n      }\n    },\n\n    enableAds() {\n      let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      state$1.adsEnabled = enabled;\n    },\n\n    /* Public getters */\n    get duration() {\n      return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration);\n    },\n\n    get currentTime() {\n      return videoEl && videoEl.currentTime;\n    },\n\n    get muted() {\n      return videoEl && videoEl.muted;\n    },\n\n    get looped() {\n      return videoEl && videoEl.loop;\n    },\n\n    get src() {\n      return videoEl && videoEl.getAttribute('src');\n    },\n\n    get playing() {\n      return state$1.playing;\n    },\n\n    get playingAds() {\n      return state$1.playingAds;\n    },\n\n    get canInteract() {\n      // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n      return state$1.playingAds === false;\n    },\n\n    get top() {\n      return videoEl && parseFloat(videoEl.style.top);\n    },\n\n    get left() {\n      return videoEl && parseFloat(videoEl.style.left);\n    },\n\n    get bottom() {\n      return videoEl && parseFloat(videoEl.style.top - videoEl.style.height);\n    },\n\n    get right() {\n      return videoEl && parseFloat(videoEl.style.left - videoEl.style.width);\n    },\n\n    get width() {\n      return videoEl && parseFloat(videoEl.style.width);\n    },\n\n    get height() {\n      return videoEl && parseFloat(videoEl.style.height);\n    },\n\n    get visible() {\n      if (textureMode === true) {\n        return videoTexture.isVisible;\n      } else {\n        return videoEl && videoEl.style.display === 'block';\n      }\n    },\n\n    get adsEnabled() {\n      return state$1.adsEnabled;\n    },\n\n    // prefixed with underscore to indicate 'semi-private'\n    // because it's not recommended to interact directly with the video element\n    get _videoEl() {\n      return videoEl;\n    },\n\n    get _consumer() {\n      return consumer$1;\n    }\n\n  };\n  autoSetupMixin(videoPlayerPlugin, () => {\n    precision = ApplicationInstance$1 && ApplicationInstance$1.stage && ApplicationInstance$1.stage.getRenderPrecision() || precision;\n    videoEl = setupVideoTag();\n    textureMode = Settings.get('platform', 'textureMode', false);\n\n    if (textureMode === true) {\n      videoEl.setAttribute('crossorigin', 'anonymous');\n      videoTexture = setUpVideoTexture();\n    }\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let consumer;\n\n  let getAds = () => {\n    // todo: enable some default ads during development, maybe from the settings.json\n    return Promise.resolve({\n      prerolls: [],\n      midrolls: [],\n      postrolls: []\n    });\n  };\n\n  const initAds = config => {\n    if (config.getAds) {\n      getAds = config.getAds;\n    }\n  };\n  const state = {\n    active: false\n  };\n\n  const playSlot = function () {\n    let slot = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return slot.reduce((promise, ad) => {\n      return promise.then(() => {\n        return playAd(ad);\n      });\n    }, Promise.resolve(null));\n  };\n\n  const playAd = ad => {\n    return new Promise(resolve => {\n      if (state.active === false) {\n        Log$1.info('Ad', 'Skipping add due to inactive state');\n        return resolve();\n      } // is it safe to rely on videoplayer plugin already created the video tag?\n\n\n      const videoEl = document.getElementsByTagName('video')[0];\n      videoEl.style.display = 'block';\n      videoEl.style.visibility = 'visible';\n      videoEl.src = mediaUrl$1(ad.url);\n      videoEl.load();\n      let timeEvents = null;\n      let timeout;\n\n      const cleanup = () => {\n        // remove all listeners\n        Object.keys(handlers).forEach(handler => videoEl.removeEventListener(handler, handlers[handler]));\n        resolve();\n      };\n\n      const handlers = {\n        play() {\n          Log$1.info('Ad', 'Play ad', ad.url);\n          fireOnConsumer('Play', ad);\n          sendBeacon(ad.callbacks, 'defaultImpression');\n        },\n\n        ended() {\n          fireOnConsumer('Ended', ad);\n          sendBeacon(ad.callbacks, 'complete');\n          cleanup();\n        },\n\n        timeupdate() {\n          if (!timeEvents && videoEl.duration) {\n            // calculate when to fire the time based events (now that duration is known)\n            timeEvents = {\n              firstQuartile: videoEl.duration / 4,\n              midPoint: videoEl.duration / 2,\n              thirdQuartile: videoEl.duration / 4 * 3\n            };\n            Log$1.info('Ad', 'Calculated quartiles times', {\n              timeEvents\n            });\n          }\n\n          if (timeEvents && timeEvents.firstQuartile && videoEl.currentTime >= timeEvents.firstQuartile) {\n            fireOnConsumer('FirstQuartile', ad);\n            delete timeEvents.firstQuartile;\n            sendBeacon(ad.callbacks, 'firstQuartile');\n          }\n\n          if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n            fireOnConsumer('MidPoint', ad);\n            delete timeEvents.midPoint;\n            sendBeacon(ad.callbacks, 'midPoint');\n          }\n\n          if (timeEvents && timeEvents.thirdQuartile && videoEl.currentTime >= timeEvents.thirdQuartile) {\n            fireOnConsumer('ThirdQuartile', ad);\n            delete timeEvents.thirdQuartile;\n            sendBeacon(ad.callbacks, 'thirdQuartile');\n          }\n        },\n\n        stalled() {\n          fireOnConsumer('Stalled', ad);\n          timeout = setTimeout(() => {\n            cleanup();\n          }, 5000); // make timeout configurable\n        },\n\n        canplay() {\n          timeout && clearTimeout(timeout);\n        },\n\n        error() {\n          fireOnConsumer('Error', ad);\n          cleanup();\n        },\n\n        // this doesn't work reliably on sky box, moved logic to timeUpdate event\n        // loadedmetadata() {\n        //   // calculate when to fire the time based events (now that duration is known)\n        //   timeEvents = {\n        //     firstQuartile: videoEl.duration / 4,\n        //     midPoint: videoEl.duration / 2,\n        //     thirdQuartile: (videoEl.duration / 4) * 3,\n        //   }\n        // },\n        abort() {\n          cleanup();\n        } // todo: pause, resume, mute, unmute beacons\n\n\n      }; // add all listeners\n\n      Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]));\n      videoEl.play();\n    });\n  };\n\n  const sendBeacon = (callbacks, event) => {\n    if (callbacks && callbacks[event]) {\n      Log$1.info('Ad', 'Sending beacon', event, callbacks[event]);\n      return callbacks[event].reduce((promise, url) => {\n        return promise.then(() => fetch(url) // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n        // note: for fetch failed http responses don't throw an Error :)\n        .then(response => {\n          if (response.status === 200) {\n            fireOnConsumer('Beacon' + event + 'Sent');\n          } else {\n            fireOnConsumer('Beacon' + event + 'Failed' + response.status);\n          }\n\n          Promise.resolve(null);\n        }).catch(() => {\n          Promise.resolve(null);\n        }));\n      }, Promise.resolve(null));\n    } else {\n      Log$1.info('Ad', 'No callback found for ' + event);\n    }\n  };\n\n  const fireOnConsumer = (event, args) => {\n    if (consumer) {\n      consumer.fire('$ad' + event, args);\n      consumer.fire('$adEvent', event, args);\n    }\n  };\n\n  var Ads = {\n    get(config, videoPlayerConsumer) {\n      if (config.enabled === false) {\n        return Promise.resolve({\n          prerolls() {\n            return Promise.resolve();\n          }\n\n        });\n      }\n\n      consumer = videoPlayerConsumer;\n      return new Promise(resolve => {\n        Log$1.info('Ad', 'Starting session');\n        getAds(config).then(ads => {\n          Log$1.info('Ad', 'API result', ads);\n          resolve({\n            prerolls() {\n              if (ads.preroll) {\n                state.active = true;\n                fireOnConsumer('PrerollSlotImpression', ads);\n                sendBeacon(ads.preroll.callbacks, 'slotImpression');\n                return playSlot(ads.preroll.ads).then(() => {\n                  fireOnConsumer('PrerollSlotEnd', ads);\n                  sendBeacon(ads.preroll.callbacks, 'slotEnd');\n                  state.active = false;\n                });\n              }\n\n              return Promise.resolve();\n            },\n\n            midrolls() {\n              return Promise.resolve();\n            },\n\n            postrolls() {\n              return Promise.resolve();\n            }\n\n          });\n        });\n      });\n    },\n\n    cancel() {\n      Log$1.info('Ad', 'Cancel Ad');\n      state.active = false;\n    },\n\n    stop() {\n      Log$1.info('Ad', 'Stop Ad');\n      state.active = false; // fixme: duplication\n\n      const videoEl = document.getElementsByTagName('video')[0];\n      videoEl.pause();\n      videoEl.removeAttribute('src');\n    }\n\n  };\n\n  var isMergeableObject = function isMergeableObject(value) {\n    return isNonNullObject(value) && !isSpecial(value);\n  };\n\n  function isNonNullObject(value) {\n    return !!value && typeof value === 'object';\n  }\n\n  function isSpecial(value) {\n    var stringValue = Object.prototype.toString.call(value);\n    return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);\n  } // see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\n\n\n  var canUseSymbol = typeof Symbol === 'function' && Symbol.for;\n  var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\n  function isReactElement(value) {\n    return value.$$typeof === REACT_ELEMENT_TYPE;\n  }\n\n  function emptyTarget(val) {\n    return Array.isArray(val) ? [] : {};\n  }\n\n  function cloneUnlessOtherwiseSpecified(value, options) {\n    return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;\n  }\n\n  function defaultArrayMerge(target, source, options) {\n    return target.concat(source).map(function (element) {\n      return cloneUnlessOtherwiseSpecified(element, options);\n    });\n  }\n\n  function getMergeFunction(key, options) {\n    if (!options.customMerge) {\n      return deepmerge;\n    }\n\n    var customMerge = options.customMerge(key);\n    return typeof customMerge === 'function' ? customMerge : deepmerge;\n  }\n\n  function getEnumerableOwnPropertySymbols(target) {\n    return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n      return target.propertyIsEnumerable(symbol);\n    }) : [];\n  }\n\n  function getKeys(target) {\n    return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n  }\n\n  function propertyIsOnObject(object, property) {\n    try {\n      return property in object;\n    } catch (_) {\n      return false;\n    }\n  } // Protects from prototype poisoning and unexpected merging up the prototype chain.\n\n\n  function propertyIsUnsafe(target, key) {\n    return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n    && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n    && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n  }\n\n  function mergeObject(target, source, options) {\n    var destination = {};\n\n    if (options.isMergeableObject(target)) {\n      getKeys(target).forEach(function (key) {\n        destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n      });\n    }\n\n    getKeys(source).forEach(function (key) {\n      if (propertyIsUnsafe(target, key)) {\n        return;\n      }\n\n      if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n        destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n      } else {\n        destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n      }\n    });\n    return destination;\n  }\n\n  function deepmerge(target, source, options) {\n    options = options || {};\n    options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n    options.isMergeableObject = options.isMergeableObject || isMergeableObject; // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n    // implementations can use it. The caller may not replace it.\n\n    options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n    var sourceIsArray = Array.isArray(source);\n    var targetIsArray = Array.isArray(target);\n    var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n    if (!sourceAndTargetTypesMatch) {\n      return cloneUnlessOtherwiseSpecified(source, options);\n    } else if (sourceIsArray) {\n      return options.arrayMerge(target, source, options);\n    } else {\n      return mergeObject(target, source, options);\n    }\n  }\n\n  deepmerge.all = function deepmergeAll(array, options) {\n    if (!Array.isArray(array)) {\n      throw new Error('first argument should be an array');\n    }\n\n    return array.reduce(function (prev, next) {\n      return deepmerge(prev, next, options);\n    }, {});\n  };\n\n  var deepmerge_1 = deepmerge;\n  var cjs = deepmerge_1;\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let warned = false;\n\n  const deprecated = function () {\n    let force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (force === true || warned === false) {\n      console.warn([\"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\", \"Please consider using the new 'Language'-plugin instead.\", 'https://rdkcentral.github.io/Lightning-SDK/#/plugins/language'].join('\\n\\n'));\n    }\n\n    warned = true;\n  };\n\n  class Locale {\n    constructor() {\n      this.__enabled = false;\n    }\n    /**\n     * Loads translation object from external json file.\n     *\n     * @param {String} path Path to resource.\n     * @return {Promise}\n     */\n\n\n    async load(path) {\n      if (!this.__enabled) {\n        return;\n      }\n\n      await fetch(path).then(resp => resp.json()).then(resp => {\n        this.loadFromObject(resp);\n      });\n    }\n    /**\n     * Sets language used by module.\n     *\n     * @param {String} lang\n     */\n\n\n    setLanguage(lang) {\n      deprecated();\n      this.__enabled = true;\n      this.language = lang;\n    }\n    /**\n     * Returns reference to translation object for current language.\n     *\n     * @return {Object}\n     */\n\n\n    get tr() {\n      deprecated(true);\n      return this.__trObj[this.language];\n    }\n    /**\n     * Loads translation object from existing object (binds existing object).\n     *\n     * @param {Object} trObj\n     */\n\n\n    loadFromObject(trObj) {\n      deprecated();\n      const fallbackLanguage = 'en';\n\n      if (Object.keys(trObj).indexOf(this.language) === -1) {\n        Log$1.warn('No translations found for: ' + this.language);\n\n        if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n          Log$1.warn('Using fallback language: ' + fallbackLanguage);\n          this.language = fallbackLanguage;\n        } else {\n          const error = 'No translations found for fallback language: ' + fallbackLanguage;\n          Log$1.error(error);\n          throw Error(error);\n        }\n      }\n\n      this.__trObj = trObj;\n\n      for (const lang of Object.values(this.__trObj)) {\n        for (const str of Object.keys(lang)) {\n          lang[str] = new LocalizedString(lang[str]);\n        }\n      }\n    }\n\n  }\n  /**\n   * Extended string class used for localization.\n   */\n\n\n  class LocalizedString extends String {\n    /**\n     * Returns formatted LocalizedString.\n     * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n     *\n     * E.g.:\n     * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n     * A and B and A\n     *\n     * @param  {...any} args List of arguments for placeholders.\n     */\n    format() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      const sub = args.reduce((string, arg, index) => string.split(\"{\".concat(index, \"}\")).join(arg), this);\n      return new LocalizedString(sub);\n    }\n\n  }\n\n  var Locale$1 = new Locale();\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class VersionLabel extends Lightning$1.Component {\n    static _template() {\n      return {\n        rect: true,\n        color: 0xbb0078ac,\n        h: 40,\n        w: 100,\n        x: w => w - 50,\n        y: h => h - 50,\n        mount: 1,\n        Text: {\n          w: w => w,\n          h: h => h,\n          y: 5,\n          x: 20,\n          text: {\n            fontSize: 22,\n            lineHeight: 26\n          }\n        }\n      };\n    }\n\n    _firstActive() {\n      this.tag('Text').text = \"APP - v\".concat(this.version, \"\\nSDK - v\").concat(this.sdkVersion);\n      this.tag('Text').loadTexture();\n      this.w = this.tag('Text').renderWidth + 40;\n      this.h = this.tag('Text').renderHeight + 5;\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class FpsIndicator extends Lightning$1.Component {\n    static _template() {\n      return {\n        rect: true,\n        color: 0xffffffff,\n        texture: Lightning$1.Tools.getRoundRect(80, 80, 40),\n        h: 80,\n        w: 80,\n        x: 100,\n        y: 100,\n        mount: 1,\n        Background: {\n          x: 3,\n          y: 3,\n          texture: Lightning$1.Tools.getRoundRect(72, 72, 36),\n          color: 0xff008000\n        },\n        Counter: {\n          w: w => w,\n          h: h => h,\n          y: 10,\n          text: {\n            fontSize: 32,\n            textAlign: 'center'\n          }\n        },\n        Text: {\n          w: w => w,\n          h: h => h,\n          y: 48,\n          text: {\n            fontSize: 15,\n            textAlign: 'center',\n            text: 'FPS'\n          }\n        }\n      };\n    }\n\n    _setup() {\n      this.config = { ...{\n          log: false,\n          interval: 500,\n          threshold: 1\n        },\n        ...Settings$1.get('platform', 'showFps')\n      };\n      this.fps = 0;\n      this.lastFps = this.fps - this.config.threshold;\n\n      const fpsCalculator = () => {\n        this.fps = ~~(1 / this.stage.dt);\n      };\n\n      this.stage.on('frameStart', fpsCalculator);\n      this.stage.off('framestart', fpsCalculator);\n      this.interval = setInterval(this.showFps.bind(this), this.config.interval);\n    }\n\n    _firstActive() {\n      this.showFps();\n    }\n\n    _detach() {\n      clearInterval(this.interval);\n    }\n\n    showFps() {\n      if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return;\n      this.lastFps = this.fps; // green\n\n      let bgColor = 0xff008000; // orange\n\n      if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500; // red\n      else if (this.fps <= 20) bgColor = 0xffff0000;\n      this.tag('Background').setSmooth('color', bgColor);\n      this.tag('Counter').text = \"\".concat(this.fps);\n      this.config.log && Log$1.info('FPS', this.fps);\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let basePath;\n  let proxyUrl;\n  const initUtils = config => {\n    basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'));\n\n    if (config.proxyUrl) {\n      proxyUrl = ensureUrlWithProtocol(config.proxyUrl);\n    }\n  };\n  var Utils = {\n    asset(relPath) {\n      return basePath + relPath;\n    },\n\n    proxyUrl(url) {\n      let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url;\n    },\n\n    makeQueryString() {\n      return makeQueryString(...arguments);\n    },\n\n    // since imageworkers don't work without protocol\n    ensureUrlWithProtocol() {\n      return ensureUrlWithProtocol(...arguments);\n    }\n\n  };\n  const ensureUrlWithProtocol = url => {\n    if (/^\\/[^/]/i.test(url) && /^(?:file:)/i.test(window.location.protocol)) {\n      return window.location.protocol + '//' + url;\n    }\n\n    if (/^\\/\\//.test(url)) {\n      return window.location.protocol + url;\n    }\n\n    if (!/^(?:https?:)/i.test(url)) {\n      return window.location.origin + url;\n    }\n\n    return url;\n  };\n  const makeFullStaticPath = function () {\n    let pathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/';\n    let path = arguments.length > 1 ? arguments[1] : undefined;\n    // ensure path has traling slash\n    path = path.charAt(path.length - 1) !== '/' ? path + '/' : path; // if path is URL, we assume it's already the full static path, so we just return it\n\n    if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n      return path;\n    }\n\n    if (path.charAt(0) === '/') {\n      return path;\n    } else {\n      // cleanup the pathname (i.e. remove possible index.html)\n      pathname = cleanUpPathName(pathname); // remove possible leading dot from path\n\n      path = path.charAt(0) === '.' ? path.substr(1) : path; // ensure path has leading slash\n\n      path = path.charAt(0) !== '/' ? '/' + path : path;\n      return pathname + path;\n    }\n  };\n  const cleanUpPathName = pathname => {\n    if (pathname.slice(-1) === '/') return pathname.slice(0, -1);\n    const parts = pathname.split('/');\n    if (parts[parts.length - 1].indexOf('.') > -1) parts.pop();\n    return parts.join('/');\n  };\n\n  const makeQueryString = function (url) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'url';\n    // add operator as an option\n    options.operator = 'metrological'; // Todo: make this configurable (via url?)\n    // add type (= url or qr) as an option, with url as the value\n\n    options[type] = url;\n    return Object.keys(options).map(key => {\n      return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key]);\n    }).join('&');\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let meta = {};\n  let translations = {};\n  let language = null;\n  const initLanguage = function (file) {\n    let language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return new Promise((resolve, reject) => {\n      fetch(file).then(response => response.json()).then(json => {\n        setTranslations(json); // set language (directly or in a promise)\n\n        typeof language === 'object' && 'then' in language && typeof language.then === 'function' ? language.then(lang => setLanguage(lang).then(resolve).catch(reject)).catch(e => {\n          Log$1.error(e);\n          reject(e);\n        }) : setLanguage(language).then(resolve).catch(reject);\n      }).catch(() => {\n        const error = 'Language file ' + file + ' not found';\n        Log$1.error(error);\n        reject(error);\n      });\n    });\n  };\n\n  const setTranslations = obj => {\n    if ('meta' in obj) {\n      meta = { ...obj.meta\n      };\n      delete obj.meta;\n    }\n\n    translations = obj;\n  };\n\n  const setLanguage = lng => {\n    language = null;\n    return new Promise((resolve, reject) => {\n      if (lng in translations) {\n        language = lng;\n      } else {\n        if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n          language = meta.map[lng];\n        } else if ('default' in meta && meta.default in translations) {\n          const error = 'Translations for Language ' + language + ' not found. Using default language ' + meta.default;\n          Log$1.warn(error);\n          language = meta.default;\n        } else {\n          const error = 'Translations for Language ' + language + ' not found.';\n          Log$1.error(error);\n          reject(error);\n        }\n      }\n\n      if (language) {\n        Log$1.info('Setting language to', language);\n        const translationsObj = translations[language];\n\n        if (typeof translationsObj === 'object') {\n          resolve();\n        } else if (typeof translationsObj === 'string') {\n          const url = Utils.asset(translationsObj);\n          fetch(url).then(response => response.json()).then(json => {\n            // save the translations for this language (to prevent loading twice)\n            translations[language] = json;\n            resolve();\n          }).catch(e => {\n            const error = 'Error while fetching ' + url;\n            Log$1.error(error, e);\n            reject(error);\n          });\n        }\n      }\n    });\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const registry = {\n    eventListeners: [],\n    timeouts: [],\n    intervals: [],\n    targets: []\n  };\n  var Registry = {\n    // Timeouts\n    setTimeout(cb, timeout) {\n      for (var _len = arguments.length, params = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        params[_key - 2] = arguments[_key];\n      }\n\n      const timeoutId = setTimeout(() => {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId);\n        cb.apply(null, params);\n      }, timeout, params);\n      Log$1.info('Set Timeout', 'ID: ' + timeoutId);\n      registry.timeouts.push(timeoutId);\n      return timeoutId;\n    },\n\n    clearTimeout(timeoutId) {\n      if (registry.timeouts.indexOf(timeoutId) > -1) {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId);\n        Log$1.info('Clear Timeout', 'ID: ' + timeoutId);\n        clearTimeout(timeoutId);\n      } else {\n        Log$1.error('Clear Timeout', 'ID ' + timeoutId + ' not found');\n      }\n    },\n\n    clearTimeouts() {\n      registry.timeouts.forEach(timeoutId => {\n        this.clearTimeout(timeoutId);\n      });\n    },\n\n    // Intervals\n    setInterval(cb, interval) {\n      for (var _len2 = arguments.length, params = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        params[_key2 - 2] = arguments[_key2];\n      }\n\n      const intervalId = setInterval(() => {\n        registry.intervals.filter(id => id !== intervalId);\n        cb.apply(null, params);\n      }, interval, params);\n      Log$1.info('Set Interval', 'ID: ' + intervalId);\n      registry.intervals.push(intervalId);\n      return intervalId;\n    },\n\n    clearInterval(intervalId) {\n      if (registry.intervals.indexOf(intervalId) > -1) {\n        registry.intervals = registry.intervals.filter(id => id !== intervalId);\n        Log$1.info('Clear Interval', 'ID: ' + intervalId);\n        clearInterval(intervalId);\n      } else {\n        Log$1.error('Clear Interval', 'ID ' + intervalId + ' not found');\n      }\n    },\n\n    clearIntervals() {\n      registry.intervals.forEach(intervalId => {\n        this.clearInterval(intervalId);\n      });\n    },\n\n    // Event listeners\n    addEventListener(target, event, handler) {\n      target.addEventListener(event, handler);\n      const targetIndex = registry.targets.indexOf(target) > -1 ? registry.targets.indexOf(target) : registry.targets.push(target) - 1;\n      registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {};\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || [];\n      registry.eventListeners[targetIndex][event].push(handler);\n      Log$1.info('Add eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler.toString());\n    },\n\n    removeEventListener(target, event, handler) {\n      const targetIndex = registry.targets.indexOf(target);\n\n      if (targetIndex > -1 && registry.eventListeners[targetIndex] && registry.eventListeners[targetIndex][event] && registry.eventListeners[targetIndex][event].indexOf(handler) > -1) {\n        registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event].filter(fn => fn !== handler);\n        Log$1.info('Remove eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler.toString());\n        target.removeEventListener(event, handler);\n      } else {\n        Log$1.error('Remove eventListener', 'Not found', 'Target', target, 'Event: ' + event, 'Handler', handler.toString());\n      }\n    },\n\n    // if `event` is omitted, removes all registered event listeners for target\n    // if `target` is also omitted, removes all registered event listeners\n    removeEventListeners(target, event) {\n      if (target && event) {\n        const targetIndex = registry.targets.indexOf(target);\n\n        if (targetIndex > -1) {\n          registry.eventListeners[targetIndex][event].forEach(handler => {\n            this.removeEventListener(target, event, handler);\n          });\n        }\n      } else if (target) {\n        const targetIndex = registry.targets.indexOf(target);\n\n        if (targetIndex > -1) {\n          Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n            this.removeEventListeners(target, _event);\n          });\n        }\n      } else {\n        Object.keys(registry.eventListeners).forEach(targetIndex => {\n          this.removeEventListeners(registry.targets[targetIndex]);\n        });\n      }\n    },\n\n    // Clear everything (to be called upon app close for proper cleanup)\n    clear() {\n      this.clearTimeouts();\n      this.clearIntervals();\n      this.removeEventListeners();\n      registry.eventListeners = [];\n      registry.timeouts = [];\n      registry.intervals = [];\n      registry.targets = [];\n    }\n\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const isObject$1 = v => {\n    return typeof v === 'object' && v !== null;\n  };\n  const isString$1 = v => {\n    return typeof v === 'string';\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let colors = {\n    white: '#ffffff',\n    black: '#000000',\n    red: '#ff0000',\n    green: '#00ff00',\n    blue: '#0000ff',\n    yellow: '#feff00',\n    cyan: '#00feff',\n    magenta: '#ff00ff'\n  };\n  const normalizedColors = {//store for normalized colors\n  };\n\n  const addColors = (colorsToAdd, value) => {\n    if (isObject$1(colorsToAdd)) {\n      // clean up normalizedColors if they exist in the to be added colors\n      Object.keys(colorsToAdd).forEach(color => cleanUpNormalizedColors(color));\n      colors = Object.assign({}, colors, colorsToAdd);\n    } else if (isString$1(colorsToAdd) && value) {\n      cleanUpNormalizedColors(colorsToAdd);\n      colors[colorsToAdd] = value;\n    }\n  };\n\n  const cleanUpNormalizedColors = color => {\n    for (let c in normalizedColors) {\n      if (c.indexOf(color) > -1) {\n        delete normalizedColors[c];\n      }\n    }\n  };\n\n  const initColors = file => {\n    return new Promise((resolve, reject) => {\n      if (typeof file === 'object') {\n        addColors(file);\n        return resolve();\n      }\n\n      fetch(file).then(response => response.json()).then(json => {\n        addColors(json);\n        return resolve();\n      }).catch(() => {\n        const error = 'Colors file ' + file + ' not found';\n        Log$1.error(error);\n        return reject(error);\n      });\n    });\n  };\n\n  var name = \"@lightningjs/sdk\";\n  var version = \"5.2.0\";\n  var license = \"Apache-2.0\";\n  var types = \"index.d.ts\";\n  var scripts = {\n  \tpostinstall: \"node ./scripts/postinstall.js\",\n  \tlint: \"eslint '**/*.js'\",\n  \trelease: \"npm publish --access public\",\n  \ttypedoc: \"typedoc --tsconfig tsconfig.typedoc.json\",\n  \ttsd: \"tsd\"\n  };\n  var husky = {\n  \thooks: {\n  \t\t\"pre-commit\": \"lint-staged\"\n  \t}\n  };\n  var dependencies = {\n  \t\"@babel/polyfill\": \"^7.11.5\",\n  \t\"@lightningjs/core\": \"^2.7.0\",\n  \t\"@metrological/sdk\": \"github:metrological/metrological-sdk\",\n  \t\"@michieljs/execute-as-promise\": \"^1.0.0\",\n  \tdeepmerge: \"^4.2.2\",\n  \tlocalCookie: \"github:WebPlatformForEmbedded/localCookie\",\n  \tshelljs: \"^0.8.5\",\n  \t\"url-polyfill\": \"^1.1.10\",\n  \t\"whatwg-fetch\": \"^3.0.0\"\n  };\n  var devDependencies = {\n  \t\"@babel/core\": \"^7.11.6\",\n  \t\"@babel/plugin-transform-parameters\": \"^7.10.5 \",\n  \t\"@babel/plugin-transform-spread\": \"^7.11.0\",\n  \t\"@babel/preset-env\": \"^7.11.5\",\n  \t\"babel-eslint\": \"^10.1.0\",\n  \teslint: \"^7.10.0\",\n  \t\"eslint-config-prettier\": \"^6.12.0\",\n  \t\"eslint-plugin-prettier\": \"^3.1.4\",\n  \thusky: \"^4.3.0\",\n  \t\"lint-staged\": \"^10.4.0\",\n  \tprettier: \"^1.19.1\",\n  \trollup: \"^1.32.1\",\n  \t\"rollup-plugin-babel\": \"^4.4.0\",\n  \ttsd: \"^0.22.0\",\n  \ttypedoc: \"^0.23.9\"\n  };\n  var repository = {\n  \ttype: \"git\",\n  \turl: \"git@github.com:rdkcentral/Lightning-SDK.git\"\n  };\n  var bugs = {\n  \turl: \"https://github.com/rdkcentral/Lightning-SDK/issues\"\n  };\n  var packageInfo = {\n  \tname: name,\n  \tversion: version,\n  \tlicense: license,\n  \ttypes: types,\n  \tscripts: scripts,\n  \t\"lint-staged\": {\n  \t\"*.js\": [\n  \t\t\"eslint --fix\"\n  \t],\n  \t\"src/startApp.js\": [\n  \t\t\"rollup -c ./rollup.config.js\"\n  \t]\n  },\n  \thusky: husky,\n  \tdependencies: dependencies,\n  \tdevDependencies: devDependencies,\n  \trepository: repository,\n  \tbugs: bugs\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let AppInstance;\n  const defaultOptions = {\n    stage: {\n      w: 1920,\n      h: 1080,\n      clearColor: 0x00000000,\n      canvas2d: false\n    },\n    debug: false,\n    defaultFontFace: 'RobotoRegular',\n    keys: {\n      8: 'Back',\n      13: 'Enter',\n      27: 'Menu',\n      37: 'Left',\n      38: 'Up',\n      39: 'Right',\n      40: 'Down',\n      174: 'ChannelDown',\n      175: 'ChannelUp',\n      178: 'Stop',\n      250: 'PlayPause',\n      191: 'Search',\n      // Use \"/\" for keyboard\n      409: 'Search'\n    }\n  };\n  const customFontFaces = [];\n\n  const fontLoader = (fonts, store) => new Promise((resolve, reject) => {\n    fonts.map(_ref => {\n      let {\n        family,\n        url,\n        urls,\n        descriptors\n      } = _ref;\n      return () => {\n        const src = urls ? urls.map(url => {\n          return 'url(' + url + ')';\n        }) : 'url(' + url + ')';\n        const fontFace = new FontFace(family, src, descriptors || {});\n        store.push(fontFace);\n        Log$1.info('Loading font', family);\n        document.fonts.add(fontFace);\n        return fontFace.load();\n      };\n    }).reduce((promise, method) => {\n      return promise.then(() => method());\n    }, Promise.resolve(null)).then(resolve).catch(reject);\n  });\n\n  function Application (App, appData, platformSettings) {\n    const {\n      width,\n      height\n    } = platformSettings;\n\n    if (width && height) {\n      defaultOptions.stage['w'] = width;\n      defaultOptions.stage['h'] = height;\n      defaultOptions.stage['precision'] = width / 1920;\n    } // support for 720p browser\n\n\n    if (!width && !height && window.innerHeight === 720) {\n      defaultOptions.stage['w'] = 1280;\n      defaultOptions.stage['h'] = 720;\n      defaultOptions.stage['precision'] = 1280 / 1920;\n    }\n\n    return class Application extends Lightning$1.Application {\n      constructor(options) {\n        const config = cjs(defaultOptions, options); // Deepmerge breaks HTMLCanvasElement, so restore the passed in canvas.\n\n        if (options.stage.canvas) {\n          config.stage.canvas = options.stage.canvas;\n        }\n\n        super(config);\n        this.config = config;\n      }\n\n      static _template() {\n        return {\n          w: 1920,\n          h: 1080\n        };\n      }\n\n      colorshift() {\n        let type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        Accessibility.colorshift(this, type, config);\n      }\n\n      _setup() {\n        Promise.all([this.loadFonts(App.config && App.config.fonts || App.getFonts && App.getFonts() || []), // to be deprecated\n        Locale$1.load(App.config && App.config.locale || App.getLocale && App.getLocale()), App.language && this.loadLanguage(App.language()), App.colors && this.loadColors(App.colors())]).then(() => {\n          Metrics$1.app.loaded();\n          this.w = this.config.stage.w;\n          this.h = this.config.stage.h;\n          AppInstance = this.stage.c({\n            ref: 'App',\n            type: App,\n            zIndex: 1,\n            forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps\n          });\n          this.childList.a(AppInstance);\n\n          this._refocus();\n\n          Log$1.info('App version', this.config.version);\n          Log$1.info('SDK version', packageInfo.version);\n\n          if (platformSettings.showVersion) {\n            this.childList.a({\n              ref: 'VersionLabel',\n              type: VersionLabel,\n              version: this.config.version,\n              sdkVersion: packageInfo.version,\n              zIndex: 1\n            });\n          }\n\n          if (platformSettings.showFps) {\n            this.childList.a({\n              ref: 'FpsCounter',\n              type: FpsIndicator,\n              zIndex: 1\n            });\n          }\n\n          super._setup();\n        }).catch(console.error);\n      }\n\n      _handleBack() {\n        this.closeApp();\n      }\n\n      _handleExit() {\n        this.closeApp();\n      }\n\n      closeApp() {\n        Log$1.info('Signaling App Close');\n\n        if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n          platformSettings.onClose(...arguments);\n        } else {\n          this.close();\n        }\n      }\n\n      close() {\n        Log$1.info('Closing App');\n        Settings$1.clearSubscribers();\n        Registry.clear();\n        this.childList.remove(this.tag('App'));\n        this.cleanupFonts(); // force texture garbage collect\n\n        this.stage.gc();\n        this.destroy();\n      }\n\n      loadFonts(fonts) {\n        return platformSettings.fontLoader && typeof platformSettings.fontLoader === 'function' ? platformSettings.fontLoader(fonts, customFontFaces) : fontLoader(fonts, customFontFaces);\n      }\n\n      cleanupFonts() {\n        if ('delete' in document.fonts) {\n          customFontFaces.forEach(fontFace => {\n            Log$1.info('Removing font', fontFace.family);\n            document.fonts.delete(fontFace);\n          });\n        } else {\n          Log$1.info('No support for removing manually-added fonts');\n        }\n      }\n\n      loadLanguage(config) {\n        let file = Utils.asset('translations.json');\n        let language = config;\n\n        if (typeof language === 'object') {\n          language = config.language || null;\n          file = config.file || file;\n        }\n\n        return initLanguage(file, language);\n      }\n\n      loadColors(config) {\n        let file = Utils.asset('colors.json');\n\n        if (config && (typeof config === 'string' || typeof config === 'object')) {\n          file = config;\n        }\n\n        return initColors(file);\n      }\n\n      set focus(v) {\n        this._focussed = v;\n\n        this._refocus();\n      }\n\n      _getFocused() {\n        return this._focussed || this.tag('App');\n      }\n\n    };\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class ScaledImageTexture extends Lightning$1.textures.ImageTexture {\n    constructor(stage) {\n      super(stage);\n      this._scalingOptions = undefined;\n    }\n\n    set options(options) {\n      this.resizeMode = this._scalingOptions = options;\n    }\n\n    _getLookupId() {\n      return \"\".concat(this._src, \"-\").concat(this._scalingOptions.type, \"-\").concat(this._scalingOptions.w, \"-\").concat(this._scalingOptions.h);\n    }\n\n    getNonDefaults() {\n      const obj = super.getNonDefaults();\n\n      if (this._src) {\n        obj.src = this._src;\n      }\n\n      return obj;\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const events = ['timeupdate', 'error', 'ended', 'loadeddata', 'canplay', 'play', 'playing', 'pause', 'loadstart', 'seeking', 'seeked', 'encrypted'];\n\n  let mediaUrl = url => url;\n\n  const initMediaPlayer = config => {\n    if (config.mediaUrl) {\n      mediaUrl = config.mediaUrl;\n    }\n  };\n  class Mediaplayer extends Lightning$1.Component {\n    _construct() {\n      this._skipRenderToTexture = false;\n      this._metrics = null;\n      this._textureMode = Settings$1.get('platform', 'textureMode') || false;\n      Log$1.info('Texture mode: ' + this._textureMode);\n      console.warn([\"The 'MediaPlayer'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\", \"Please consider using the new 'VideoPlayer'-plugin instead.\", 'https://rdkcentral.github.io/Lightning-SDK/#/plugins/videoplayer'].join('\\n\\n'));\n    }\n\n    static _template() {\n      return {\n        Video: {\n          VideoWrap: {\n            VideoTexture: {\n              visible: false,\n              pivot: 0.5,\n              texture: {\n                type: Lightning$1.textures.StaticTexture,\n                options: {}\n              }\n            }\n          }\n        }\n      };\n    }\n\n    set skipRenderToTexture(v) {\n      this._skipRenderToTexture = v;\n    }\n\n    get textureMode() {\n      return this._textureMode;\n    }\n\n    get videoView() {\n      return this.tag('Video');\n    }\n\n    _init() {\n      //re-use videotag if already there\n      const videoEls = document.getElementsByTagName('video');\n      if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0];else {\n        this.videoEl = document.createElement('video');\n        this.videoEl.setAttribute('id', 'video-player');\n        this.videoEl.style.position = 'absolute';\n        this.videoEl.style.zIndex = '1';\n        this.videoEl.style.display = 'none';\n        this.videoEl.setAttribute('width', '100%');\n        this.videoEl.setAttribute('height', '100%');\n        this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible';\n        document.body.appendChild(this.videoEl);\n      }\n\n      if (this.textureMode && !this._skipRenderToTexture) {\n        this._createVideoTexture();\n      }\n\n      this.eventHandlers = [];\n    }\n\n    _registerListeners() {\n      events.forEach(event => {\n        const handler = e => {\n          if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n            this._metrics[event]({\n              currentTime: this.videoEl.currentTime\n            });\n          }\n\n          this.fire(event, {\n            videoElement: this.videoEl,\n            event: e\n          });\n        };\n\n        this.eventHandlers.push(handler);\n        this.videoEl.addEventListener(event, handler);\n      });\n    }\n\n    _deregisterListeners() {\n      Log$1.info('Deregistering event listeners MediaPlayer');\n      events.forEach((event, index) => {\n        this.videoEl.removeEventListener(event, this.eventHandlers[index]);\n      });\n      this.eventHandlers = [];\n    }\n\n    _attach() {\n      this._registerListeners();\n    }\n\n    _detach() {\n      this._deregisterListeners();\n\n      this.close();\n    }\n\n    _createVideoTexture() {\n      const stage = this.stage;\n      const gl = stage.gl;\n      const glTexture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, glTexture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      this.videoTexture.options = {\n        source: glTexture,\n        w: this.videoEl.width,\n        h: this.videoEl.height\n      };\n    }\n\n    _startUpdatingVideoTexture() {\n      if (this.textureMode && !this._skipRenderToTexture) {\n        const stage = this.stage;\n\n        if (!this._updateVideoTexture) {\n          this._updateVideoTexture = () => {\n            if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n              const gl = stage.gl;\n              const currentTime = new Date().getTime(); // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n              // We'll fallback to fixed 30fps in this case.\n\n              const frameCount = this.videoEl.webkitDecodedFrameCount;\n              const mustUpdate = frameCount ? this._lastFrame !== frameCount : this._lastTime < currentTime - 30;\n\n              if (mustUpdate) {\n                this._lastTime = currentTime;\n                this._lastFrame = frameCount;\n\n                try {\n                  gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n                  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n                  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl);\n                  this._lastFrame = this.videoEl.webkitDecodedFrameCount;\n                  this.videoTextureView.visible = true;\n                  this.videoTexture.options.w = this.videoEl.videoWidth;\n                  this.videoTexture.options.h = this.videoEl.videoHeight;\n                  const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h;\n                  const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight;\n\n                  if (expectedAspectRatio > realAspectRatio) {\n                    this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio;\n                    this.videoTextureView.scaleY = 1;\n                  } else {\n                    this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio;\n                    this.videoTextureView.scaleX = 1;\n                  }\n                } catch (e) {\n                  Log$1.error('texImage2d video', e);\n\n                  this._stopUpdatingVideoTexture();\n\n                  this.videoTextureView.visible = false;\n                }\n\n                this.videoTexture.source.forceRenderUpdate();\n              }\n            }\n          };\n        }\n\n        if (!this._updatingVideoTexture) {\n          stage.on('frameStart', this._updateVideoTexture);\n          this._updatingVideoTexture = true;\n        }\n      }\n    }\n\n    _stopUpdatingVideoTexture() {\n      if (this.textureMode) {\n        const stage = this.stage;\n        stage.removeListener('frameStart', this._updateVideoTexture);\n        this._updatingVideoTexture = false;\n        this.videoTextureView.visible = false;\n\n        if (this.videoTexture.options.source) {\n          const gl = stage.gl;\n          gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n          gl.clearColor(0, 0, 0, 1);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n      }\n    }\n\n    updateSettings() {\n      let settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // The Component that 'consumes' the media player.\n      this._consumer = settings.consumer;\n\n      if (this._consumer && this._consumer.getMediaplayerSettings) {\n        // Allow consumer to add settings.\n        settings = Object.assign(settings, this._consumer.getMediaplayerSettings());\n      }\n\n      if (!Lightning$1.Utils.equalValues(this._stream, settings.stream)) {\n        if (settings.stream && settings.stream.keySystem) {\n          navigator.requestMediaKeySystemAccess(settings.stream.keySystem.id, settings.stream.keySystem.config).then(keySystemAccess => {\n            return keySystemAccess.createMediaKeys();\n          }).then(createdMediaKeys => {\n            return this.videoEl.setMediaKeys(createdMediaKeys);\n          }).then(() => {\n            if (settings.stream && settings.stream.src) this.open(settings.stream.src);\n          }).catch(() => {\n            console.error('Failed to set up MediaKeys');\n          });\n        } else if (settings.stream && settings.stream.src) {\n          // This is here to be backwards compatible, will be removed\n          // in future sdk release\n          if (Settings$1.get('app', 'hls')) {\n            if (!window.Hls) {\n              window.Hls = class Hls {\n                static isSupported() {\n                  console.warn('hls-light not included');\n                  return false;\n                }\n\n              };\n            }\n\n            if (window.Hls.isSupported()) {\n              if (!this._hls) this._hls = new window.Hls({\n                liveDurationInfinity: true\n              });\n\n              this._hls.loadSource(settings.stream.src);\n\n              this._hls.attachMedia(this.videoEl);\n\n              this.videoEl.style.display = 'block';\n            }\n          } else {\n            this.open(settings.stream.src);\n          }\n        } else {\n          this.close();\n        }\n\n        this._stream = settings.stream;\n      }\n\n      this._setHide(settings.hide);\n\n      this._setVideoArea(settings.videoPos);\n    }\n\n    _setHide(hide) {\n      if (this.textureMode) {\n        this.tag('Video').setSmooth('alpha', hide ? 0 : 1);\n      } else {\n        this.videoEl.style.visibility = hide ? 'hidden' : 'visible';\n      }\n    }\n\n    open(url) {\n      let settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        hide: false,\n        videoPosition: null\n      };\n      // prep the media url to play depending on platform (mediaPlayerplugin)\n      url = mediaUrl(url);\n      this._metrics = Metrics$1.media(url);\n      Log$1.info('Playing stream', url);\n\n      if (this.application.noVideo) {\n        Log$1.info('noVideo option set, so ignoring: ' + url);\n        return;\n      } // close the video when opening same url as current (effectively reloading)\n\n\n      if (this.videoEl.getAttribute('src') === url) {\n        this.close();\n      }\n\n      this.videoEl.setAttribute('src', url); // force hide, then force show (in next tick!)\n      // (fixes comcast playback rollover issue)\n\n      this.videoEl.style.visibility = 'hidden';\n      this.videoEl.style.display = 'none';\n      setTimeout(() => {\n        this.videoEl.style.display = 'block';\n        this.videoEl.style.visibility = 'visible';\n      });\n\n      this._setHide(settings.hide);\n\n      this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080]);\n    }\n\n    close() {\n      // We need to pause first in order to stop sound.\n      this.videoEl.pause();\n      this.videoEl.removeAttribute('src'); // force load to reset everything without errors\n\n      this.videoEl.load();\n\n      this._clearSrc();\n\n      this.videoEl.style.display = 'none';\n    }\n\n    playPause() {\n      if (this.isPlaying()) {\n        this.doPause();\n      } else {\n        this.doPlay();\n      }\n    }\n\n    get muted() {\n      return this.videoEl.muted;\n    }\n\n    set muted(v) {\n      this.videoEl.muted = v;\n    }\n\n    get loop() {\n      return this.videoEl.loop;\n    }\n\n    set loop(v) {\n      this.videoEl.loop = v;\n    }\n\n    isPlaying() {\n      return this._getState() === 'Playing';\n    }\n\n    doPlay() {\n      this.videoEl.play();\n    }\n\n    doPause() {\n      this.videoEl.pause();\n    }\n\n    reload() {\n      var url = this.videoEl.getAttribute('src');\n      this.close();\n      this.videoEl.src = url;\n    }\n\n    getPosition() {\n      return Promise.resolve(this.videoEl.currentTime);\n    }\n\n    setPosition(pos) {\n      this.videoEl.currentTime = pos;\n    }\n\n    getDuration() {\n      return Promise.resolve(this.videoEl.duration);\n    }\n\n    seek(time) {\n      let absolute = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (absolute) {\n        this.videoEl.currentTime = time;\n      } else {\n        this.videoEl.currentTime += time;\n      }\n    }\n\n    get videoTextureView() {\n      return this.tag('Video').tag('VideoTexture');\n    }\n\n    get videoTexture() {\n      return this.videoTextureView.texture;\n    }\n\n    _setVideoArea(videoPos) {\n      if (Lightning$1.Utils.equalValues(this._videoPos, videoPos)) {\n        return;\n      }\n\n      this._videoPos = videoPos;\n\n      if (this.textureMode) {\n        this.videoTextureView.patch({\n          smooth: {\n            x: videoPos[0],\n            y: videoPos[1],\n            w: videoPos[2] - videoPos[0],\n            h: videoPos[3] - videoPos[1]\n          }\n        });\n      } else {\n        const precision = this.stage.getRenderPrecision();\n        this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px';\n        this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px';\n        this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px';\n        this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px';\n      }\n    }\n\n    _fireConsumer(event, args) {\n      if (this._consumer) {\n        this._consumer.fire(event, args);\n      }\n    }\n\n    _equalInitData(buf1, buf2) {\n      if (!buf1 || !buf2) return false;\n      if (buf1.byteLength != buf2.byteLength) return false;\n      const dv1 = new Int8Array(buf1);\n      const dv2 = new Int8Array(buf2);\n\n      for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false;\n\n      return true;\n    }\n\n    error(args) {\n      this._fireConsumer('$mediaplayerError', args);\n\n      this._setState('');\n\n      return '';\n    }\n\n    loadeddata(args) {\n      this._fireConsumer('$mediaplayerLoadedData', args);\n    }\n\n    play(args) {\n      this._fireConsumer('$mediaplayerPlay', args);\n    }\n\n    playing(args) {\n      this._fireConsumer('$mediaplayerPlaying', args);\n\n      this._setState('Playing');\n    }\n\n    canplay(args) {\n      this.videoEl.play();\n\n      this._fireConsumer('$mediaplayerStart', args);\n    }\n\n    loadstart(args) {\n      this._fireConsumer('$mediaplayerLoad', args);\n    }\n\n    seeked() {\n      this._fireConsumer('$mediaplayerSeeked', {\n        currentTime: this.videoEl.currentTime,\n        duration: this.videoEl.duration || 1\n      });\n    }\n\n    seeking() {\n      this._fireConsumer('$mediaplayerSeeking', {\n        currentTime: this.videoEl.currentTime,\n        duration: this.videoEl.duration || 1\n      });\n    }\n\n    durationchange(args) {\n      this._fireConsumer('$mediaplayerDurationChange', args);\n    }\n\n    encrypted(args) {\n      const video = args.videoElement;\n      const event = args.event; // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n\n      if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n        this._previousInitData = event.initData;\n\n        this._fireConsumer('$mediaplayerEncrypted', args);\n      }\n    }\n\n    static _states() {\n      return [class Playing extends this {\n        $enter() {\n          this._startUpdatingVideoTexture();\n        }\n\n        $exit() {\n          this._stopUpdatingVideoTexture();\n        }\n\n        timeupdate() {\n          this._fireConsumer('$mediaplayerProgress', {\n            currentTime: this.videoEl.currentTime,\n            duration: this.videoEl.duration || 1\n          });\n        }\n\n        ended(args) {\n          this._fireConsumer('$mediaplayerEnded', args);\n\n          this._setState('');\n        }\n\n        pause(args) {\n          this._fireConsumer('$mediaplayerPause', args);\n\n          this._setState('Playing.Paused');\n        }\n\n        _clearSrc() {\n          this._fireConsumer('$mediaplayerStop', {});\n\n          this._setState('');\n        }\n\n        static _states() {\n          return [class Paused extends this {}];\n        }\n\n      }];\n    }\n\n  }\n\n  class localCookie {\n    constructor(e) {\n      return e = e || {}, this.forceCookies = e.forceCookies || !1, !0 === this._checkIfLocalStorageWorks() && !0 !== e.forceCookies ? {\n        getItem: this._getItemLocalStorage,\n        setItem: this._setItemLocalStorage,\n        removeItem: this._removeItemLocalStorage,\n        clear: this._clearLocalStorage,\n        keys: this._getLocalStorageKeys\n      } : {\n        getItem: this._getItemCookie,\n        setItem: this._setItemCookie,\n        removeItem: this._removeItemCookie,\n        clear: this._clearCookies,\n        keys: this._getCookieKeys\n      };\n    }\n\n    _checkIfLocalStorageWorks() {\n      if (\"undefined\" == typeof localStorage) return !1;\n\n      try {\n        return localStorage.setItem(\"feature_test\", \"yes\"), \"yes\" === localStorage.getItem(\"feature_test\") && (localStorage.removeItem(\"feature_test\"), !0);\n      } catch (e) {\n        return !1;\n      }\n    }\n\n    _getItemLocalStorage(e) {\n      return window.localStorage.getItem(e);\n    }\n\n    _setItemLocalStorage(e, t) {\n      return window.localStorage.setItem(e, t);\n    }\n\n    _removeItemLocalStorage(e) {\n      return window.localStorage.removeItem(e);\n    }\n\n    _clearLocalStorage() {\n      return window.localStorage.clear();\n    }\n\n    _getLocalStorageKeys() {\n      return Object.keys(window.localStorage);\n    }\n\n    _getItemCookie(e) {\n      var t = document.cookie.match(RegExp(\"(?:^|;\\\\s*)\" + function (e) {\n        return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n      }(e) + \"=([^;]*)\"));\n      return t && \"\" === t[1] && (t[1] = null), t ? t[1] : null;\n    }\n\n    _setItemCookie(e, t) {\n      var o = new Date(),\n          r = new Date(o.getTime() + 15768e7);\n      document.cookie = \"\".concat(e, \"=\").concat(t, \"; expires=\").concat(r.toUTCString(), \";\");\n    }\n\n    _removeItemCookie(e) {\n      document.cookie = \"\".concat(e, \"=;Max-Age=-99999999;\");\n    }\n\n    _clearCookies() {\n      document.cookie.split(\";\").forEach(e => {\n        document.cookie = e.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=Max-Age=-99999999\");\n      });\n    }\n\n    _getCookieKeys() {\n      return document.cookie.split(\";\").map(e => e.split(\"=\")[0]);\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const initStorage = () => {\n    Settings$1.get('platform', 'id'); // todo: pass options (for example to force the use of cookies)\n\n    new localCookie();\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g;\n  const isWildcard = /^[!*$]$/;\n  const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/;\n  const isNamedGroup = /^\\/:/;\n  /**\n   * Test if a route is part regular expressed\n   * and replace it for a simple character\n   * @param route\n   * @returns {*}\n   */\n\n  const stripRegex = function (route) {\n    let char = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'R';\n\n    // if route is part regular expressed we replace\n    // the regular expression for a character to\n    // simplify floor calculation and backtracking\n    if (hasRegex.test(route)) {\n      route = route.replace(hasRegex, char);\n    }\n\n    return route;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /**\n   * Create a local request register\n   * @param flags\n   * @returns {Map<any, any>}\n   */\n  const createRegister = flags => {\n    const reg = new Map() // store user defined and router\n    // defined flags in register\n    ;\n    [...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n      reg.set(key, flags[key]);\n    });\n    return reg;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class Request {\n    constructor() {\n      let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      let navArgs = arguments.length > 1 ? arguments[1] : undefined;\n      let storeCaller = arguments.length > 2 ? arguments[2] : undefined;\n\n      /**\n       * Hash we navigate to\n       * @type {string}\n       * @private\n       */\n      this._hash = hash;\n      /**\n       * Do we store previous hash in history\n       * @type {boolean}\n       * @private\n       */\n\n      this._storeCaller = storeCaller;\n      /**\n       * Request and navigate data\n       * @type {Map}\n       * @private\n       */\n\n      this._register = new Map();\n      /**\n       * Flag if the instance is created due to\n       * this request\n       * @type {boolean}\n       * @private\n       */\n\n      this._isCreated = false;\n      /**\n       * Flag if the instance is shared between\n       * previous and current request\n       * @type {boolean}\n       * @private\n       */\n\n      this._isSharedInstance = false;\n      /**\n       * Flag if the request has been cancelled\n       * @type {boolean}\n       * @private\n       */\n\n      this._cancelled = false;\n      /**\n       * if instance is shared between requests we copy state object\n       * from instance before the new request overrides state\n       * @type {null}\n       * @private\n       */\n\n      this._copiedHistoryState = null; // if there are arguments attached to navigate()\n      // we store them in new request\n\n      if (isObject(navArgs)) {\n        this._register = createRegister(navArgs);\n      } else if (isBoolean(navArgs)) {\n        // if second navigate() argument is explicitly\n        // set to false we prevent the calling page\n        // from ending up in history\n        this._storeCaller = navArgs;\n      } // @todo: remove because we can simply check\n      // ._storeCaller property\n\n\n      this._register.set(symbols.store, this._storeCaller);\n    }\n\n    cancel() {\n      Log$1.debug('[router]:', \"cancelled \".concat(this._hash));\n      this._cancelled = true;\n    }\n\n    get url() {\n      return this._hash;\n    }\n\n    get register() {\n      return this._register;\n    }\n\n    get hash() {\n      return this._hash;\n    }\n\n    set hash(args) {\n      this._hash = args;\n    }\n\n    get route() {\n      return this._route;\n    }\n\n    set route(args) {\n      this._route = args;\n    }\n\n    get provider() {\n      return this._provider;\n    }\n\n    set provider(args) {\n      this._provider = args;\n    }\n\n    get providerType() {\n      return this._providerType;\n    }\n\n    set providerType(args) {\n      this._providerType = args;\n    }\n\n    set page(args) {\n      this._page = args;\n    }\n\n    get page() {\n      return this._page;\n    }\n\n    set isCreated(args) {\n      this._isCreated = args;\n    }\n\n    get isCreated() {\n      return this._isCreated;\n    }\n\n    get isSharedInstance() {\n      return this._isSharedInstance;\n    }\n\n    set isSharedInstance(args) {\n      this._isSharedInstance = args;\n    }\n\n    get isCancelled() {\n      return this._cancelled;\n    }\n\n    set copiedHistoryState(v) {\n      this._copiedHistoryState = v;\n    }\n\n    get copiedHistoryState() {\n      return this._copiedHistoryState;\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class Route {\n    constructor() {\n      let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // keep backwards compatible\n      let type = ['on', 'before', 'after'].reduce((acc, type) => {\n        return isFunction(config[type]) ? type : acc;\n      }, undefined);\n      this._cfg = config;\n\n      if (type) {\n        this._provider = {\n          type,\n          request: config[type]\n        };\n      }\n    }\n\n    get path() {\n      return this._cfg.path;\n    }\n\n    get name() {\n      return this._cfg.name;\n    }\n\n    get component() {\n      return this._cfg.component;\n    }\n\n    get options() {\n      return this._cfg.options;\n    }\n\n    get widgets() {\n      return this._cfg.widgets;\n    }\n\n    get cache() {\n      return this._cfg.cache;\n    }\n\n    get hook() {\n      return this._cfg.hook;\n    }\n\n    get beforeNavigate() {\n      return this._cfg.beforeNavigate;\n    }\n\n    get provider() {\n      return this._provider;\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /**\n   * Simple route length calculation\n   * @param route {string}\n   * @returns {number} - floor\n   */\n\n  const getFloor = route => {\n    return stripRegex(route).split('/').length;\n  };\n  /**\n   * return all stored routes that live on the same floor\n   * @param floor\n   * @returns {Array}\n   */\n\n  const getRoutesByFloor = floor => {\n    const matches = []; // simple filter of level candidates\n\n    for (let [route] of routes.entries()) {\n      if (getFloor(route) === floor) {\n        matches.push(route);\n      }\n    }\n\n    return matches;\n  };\n  /**\n   * return a matching route by provided hash\n   * hash: home/browse/12 will match:\n   * route: home/browse/:categoryId\n   * @param hash {string}\n   * @returns {boolean|{}} - route\n   */\n\n\n  const getRouteByHash = hash => {\n    // @todo: clean up on handleHash\n    hash = hash.replace(/^#/, '');\n    const getUrlParts = /(\\/?:?[^/]+)/g; // grab possible candidates from stored routes\n\n    const candidates = getRoutesByFloor(getFloor(hash)); // break hash down in chunks\n\n    const hashParts = hash.match(getUrlParts) || []; // to simplify the route matching and prevent look around\n    // in our getUrlParts regex we get the regex part from\n    // route candidate and store them so that we can reference\n    // them when we perform the actual regex against hash\n\n    let regexStore = [];\n    let matches = candidates.filter(route => {\n      let isMatching = true; // replace regex in route with lookup id => @@{storeId}@@\n\n      if (hasRegex.test(route)) {\n        const regMatches = route.match(hasRegex);\n\n        if (regMatches && regMatches.length) {\n          route = regMatches.reduce((fullRoute, regex) => {\n            const lookupId = regexStore.length;\n            fullRoute = fullRoute.replace(regex, \"@@\".concat(lookupId, \"@@\"));\n            regexStore.push(regex.substring(1, regex.length - 1));\n            return fullRoute;\n          }, route);\n        }\n      }\n\n      const routeParts = route.match(getUrlParts) || [];\n\n      for (let i = 0, j = routeParts.length; i < j; i++) {\n        const routePart = routeParts[i];\n        const hashPart = hashParts[i]; // Since we support catch-all and regex driven name groups\n        // we first test for regex lookup id and see if the regex\n        // matches the value from the hash\n\n        if (hasLookupId.test(routePart)) {\n          const routeMatches = hasLookupId.exec(routePart);\n          const storeId = routeMatches[1];\n          const routeRegex = regexStore[storeId]; // split regex and modifiers so we can use both\n          // to create a new RegExp\n          // eslint-disable-next-line\n\n          const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex);\n\n          if (regMatches && regMatches.length) {\n            const expression = regMatches[1];\n            const modifiers = regMatches[2];\n            const regex = new RegExp(\"^/\".concat(expression, \"$\"), modifiers);\n\n            if (!regex.test(hashPart)) {\n              isMatching = false;\n            }\n          }\n        } else if (isNamedGroup.test(routePart)) {\n          // we kindly skip namedGroups because this is dynamic\n          // we only need to the static and regex drive parts\n          continue;\n        } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n          isMatching = false;\n        }\n      }\n\n      return isMatching;\n    });\n\n    if (matches.length) {\n      if (matches.indexOf(hash) !== -1) {\n        const match = matches[matches.indexOf(hash)];\n        return routes.get(match);\n      } else {\n        // we give prio to static routes over dynamic\n        matches = matches.sort(a => {\n          return isNamedGroup.test(a) ? -1 : 1;\n        }); // would be strange if this fails\n        // but still we test\n\n        if (routeExists(matches[0])) {\n          return routes.get(matches[0]);\n        }\n      }\n    }\n\n    return false;\n  };\n  const getValuesFromHash = function () {\n    let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let path = arguments.length > 1 ? arguments[1] : undefined;\n    // replace the regex definition from the route because\n    // we already did the matching part\n    path = stripRegex(path, '');\n    const getUrlParts = /(\\/?:?[\\w%\\s:.-]+)/g;\n    const hashParts = hash.match(getUrlParts) || [];\n    const routeParts = path.match(getUrlParts) || [];\n    const getNamedGroup = /^\\/:([\\w-]+)\\/?/;\n    return routeParts.reduce((storage, value, index) => {\n      const match = getNamedGroup.exec(value);\n\n      if (match && match.length) {\n        storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')));\n      }\n\n      return storage;\n    }, new Map());\n  };\n  const getOption = (stack, prop) => {\n    // eslint-disable-next-line\n    if (stack && stack.hasOwnProperty(prop)) {\n      return stack[prop];\n    } // we explicitly return undefined since we're testing\n    // for explicit test values\n\n  };\n  /**\n   * create and return new Route instance\n   * @param config\n   */\n\n  const createRoute = config => {\n    // we need to provide a bit of additional logic\n    // for the bootComponent\n    if (config.path === '$') {\n      let options = {\n        preventStorage: true\n      };\n\n      if (isObject(config.options)) {\n        options = { ...config.options,\n          ...options\n        };\n      }\n\n      config.options = options; // if configured add reference to bootRequest\n      // as router after provider\n\n      if (bootRequest) {\n        config.after = bootRequest;\n      }\n    }\n\n    return new Route(config);\n  };\n  /**\n   * Create a new Router request object\n   * @param url\n   * @param args\n   * @param store\n   * @returns {*}\n   */\n\n  const createRequest = (url, args, store) => {\n    return new Request(url, args, store);\n  };\n  const getHashByName = obj => {\n    if (!obj.to && !obj.name) {\n      return false;\n    }\n\n    const route = getRouteByName(obj.to || obj.name);\n    const hasDynamicGroup = /\\/:([\\w-]+)\\/?/;\n    let hash = route; // if route contains dynamic group\n    // we replace them with the provided params\n\n    if (hasDynamicGroup.test(route)) {\n      if (obj.params) {\n        const keys = Object.keys(obj.params);\n        hash = keys.reduce((acc, key) => {\n          return acc.replace(\":\".concat(key), obj.params[key]);\n        }, route);\n      }\n\n      if (obj.query) {\n        return \"\".concat(hash).concat(objectToQueryString(obj.query));\n      }\n    }\n\n    return hash;\n  };\n\n  const getRouteByName = name => {\n    for (let [path, route] of routes.entries()) {\n      if (route.name === name) {\n        return path;\n      }\n    }\n\n    return false;\n  };\n\n  const keepActivePageAlive = (route, request) => {\n    if (isString(route)) {\n      const routes = getRoutes();\n\n      if (routes.has(route)) {\n        route = routes.get(route);\n      } else {\n        return false;\n      }\n    }\n\n    const register = request.register;\n    const routeOptions = route.options;\n\n    if (register.has('keepAlive')) {\n      return register.get('keepAlive');\n    } else if (routeOptions && routeOptions.keepAlive) {\n      return routeOptions.keepAlive;\n    }\n\n    return false;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  var emit = (function (page) {\n    let events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!isArray(events)) {\n      events = [events];\n    }\n\n    events.forEach(e => {\n      const event = \"_on\".concat(ucfirst(e));\n\n      if (isFunction(page[event])) {\n        page[event](params);\n      }\n    });\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let activeWidget = null;\n  const getReferences = () => {\n    if (!widgetsHost) {\n      return;\n    }\n\n    return widgetsHost.get().reduce((storage, widget) => {\n      const key = widget.ref.toLowerCase();\n      storage[key] = widget;\n      return storage;\n    }, {});\n  };\n  /**\n   * update the visibility of the available widgets\n   * for the current page / route\n   * @param page\n   */\n\n  const updateWidgets = (widgets, page) => {\n    // force lowercase lookup\n    const configured = (widgets || []).map(ref => ref.toLowerCase());\n    widgetsHost.forEach(widget => {\n      widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1;\n\n      if (widget.visible) {\n        emit(widget, ['activated'], page);\n      }\n    });\n\n    if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n      app._setState('');\n    }\n  };\n\n  const getWidgetByName = name => {\n    name = ucfirst(name);\n    return widgetsHost.getByRef(name) || false;\n  };\n  /**\n   * delegate app focus to a on-screen widget\n   * @param name - {string}\n   */\n\n\n  const focusWidget = name => {\n    const widget = getWidgetByName(name);\n\n    if (widget) {\n      setActiveWidget(widget); // if app is already in 'Widgets' state we can assume that\n      // focus has been delegated from one widget to another so\n      // we need to set the new widget reference and trigger a\n      // new focus calculation of Lightning's focuspath\n\n      if (app.state === 'Widgets') {\n        app.reload(activeWidget);\n      } else {\n        app._setState('Widgets', [activeWidget]);\n      }\n    }\n  };\n  const restoreFocus = () => {\n    activeWidget = null;\n\n    app._setState('');\n  };\n  const getActiveWidget = () => {\n    return activeWidget;\n  };\n  const setActiveWidget = instance => {\n    activeWidget = instance;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const createComponent = (stage, type) => {\n    return stage.c({\n      type,\n      visible: false,\n      widgets: getReferences()\n    });\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /**\n   * Simple flat array that holds the visited hashes + state Object\n   * so the router can navigate back to them\n   * @type {Array}\n   */\n\n  let history = [];\n  const updateHistory = request => {\n    const hash = getActiveHash();\n\n    if (!hash) {\n      return;\n    } // navigate storage flag\n\n\n    const register = request.register;\n    const forceNavigateStore = register.get(symbols.store); // test preventStorage on route configuration\n\n    const activeRoute = getRouteByHash(hash);\n    const preventStorage = getOption(activeRoute.options, 'preventStorage'); // we give prio to navigate storage flag\n\n    let store = isBoolean(forceNavigateStore) ? forceNavigateStore : !preventStorage;\n\n    if (store) {\n      const toStore = hash.replace(/^\\//, '');\n      const location = locationInHistory(toStore);\n      const stateObject = getStateObject(getActivePage(), request);\n      const routerConfig = getRouterConfig(); // store hash if it's not a part of history or flag for\n      // storage of same hash is true\n\n      if (location === -1 || routerConfig.get('storeSameHash')) {\n        history.push({\n          hash: toStore,\n          state: stateObject\n        });\n      } else {\n        // if we visit the same route we want to sync history\n        const prev = history.splice(location, 1)[0];\n        history.push({\n          hash: prev.hash,\n          state: stateObject\n        });\n      }\n    }\n  };\n\n  const locationInHistory = hash => {\n    for (let i = 0; i < history.length; i++) {\n      if (history[i].hash === hash) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  const getHistoryState = hash => {\n    let state = null;\n\n    if (history.length) {\n      // if no hash is provided we get the last\n      // pushed history record\n      if (!hash) {\n        const record = history[history.length - 1]; // could be null\n\n        state = record.state;\n      } else {\n        if (locationInHistory(hash) !== -1) {\n          const record = history[locationInHistory(hash)];\n          state = record.state;\n        }\n      }\n    }\n\n    return state;\n  };\n  const replaceHistoryState = function () {\n    let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let hash = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (!history.length) {\n      return;\n    }\n\n    const location = hash ? locationInHistory(hash) : history.length - 1;\n\n    if (location !== -1 && isObject(state)) {\n      history[location].state = state;\n    }\n  };\n\n  const getStateObject = (page, request) => {\n    // if the new request shared instance with the\n    // previous request we used the copied state object\n    if (request.isSharedInstance) {\n      if (request.copiedHistoryState) {\n        return request.copiedHistoryState;\n      }\n    } else if (page && isFunction(page.historyState)) {\n      return page.historyState();\n    }\n\n    return null;\n  };\n\n  const getHistory = () => {\n    return history.slice(0);\n  };\n  const setHistory = function () {\n    let arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    if (isArray(arr)) {\n      history = arr;\n    }\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /**\n   * @type {Lightning.Application}\n   */\n\n  let application;\n  /**\n   * Actual instance of the app\n   * @type {Lightning.Component}\n   */\n\n  let app;\n  /**\n   * Component that hosts all routed pages\n   * @type {Lightning.Component}\n   */\n\n  let pagesHost;\n  /**\n   * @type {Lightning.Stage}\n   */\n\n  let stage;\n  /**\n   * Platform driven Router configuration\n   * @type {Map<string>}\n   */\n\n  let routerConfig;\n  /**\n   * Component that hosts all attached widgets\n   * @type {Lightning.Component}\n   */\n\n  let widgetsHost;\n  /**\n   * Hash we point the browser to when we boot the app\n   * and there is no deep-link provided\n   * @type {string|Function}\n   */\n\n  let rootHash;\n  /**\n   * Boot request will fire before app start\n   * can be used to execute some global logic\n   * and can be configured\n   */\n\n  let bootRequest;\n  /**\n   * Flag if we need to update the browser location hash.\n   * Router can work without.\n   * @type {boolean}\n   */\n\n  let updateHash = true;\n  /**\n   * Will be called before a route starts, can be overridden\n   * via routes config\n   * @param from - route we came from\n   * @param to - route we navigate to\n   * @returns {Promise<*>}\n   */\n  // eslint-disable-next-line\n\n  let beforeEachRoute = async (from, to) => {\n    return true;\n  };\n  /**\n   *  * Will be called after a navigate successfully resolved,\n   * can be overridden via routes config\n   */\n\n  let afterEachRoute = () => {};\n  /**\n   * All configured routes\n   * @type {Map<string, object>}\n   */\n\n  let routes = new Map();\n  /**\n   * Store all page components per route\n   * @type {Map<string, object>}\n   */\n\n  let components = new Map();\n  /**\n   * Flag if router has been initialised\n   * @type {boolean}\n   */\n\n  let initialised = false;\n  /**\n   * Current page being rendered on screen\n   * @type {null}\n   */\n\n  let activePage = null;\n  let activeHash;\n  let activeRoute;\n  /**\n   *  During the process of a navigation request a new\n   *  request can start, to prevent unwanted behaviour\n   *  the navigate()-method stores the last accepted hash\n   *  so we can invalidate any prior requests\n   */\n\n  let lastAcceptedHash;\n  /**\n   * With on()-data providing behaviour the Router forced the App\n   * in a Loading state. When the data-provider resolves we want to\n   * change the state back to where we came from\n   */\n\n  let previousState;\n\n  const mixin = app => {\n    // by default the Router Baseclass provides the component\n    // reference in which we store our pages\n    if (app.pages) {\n      pagesHost = app.pages.childList;\n    } // if the app is using widgets we grab refs\n    // and hide all the widgets\n\n\n    if (app.widgets && app.widgets.children) {\n      widgetsHost = app.widgets.childList; // hide all widgets on boot\n\n      widgetsHost.forEach(w => w.visible = false);\n    }\n\n    app._handleBack = e => {\n      step(-1);\n      e.preventDefault();\n    };\n  };\n\n  const bootRouter = (config, instance) => {\n    let {\n      appInstance,\n      routes\n    } = config; // if instance is provided and it's and Lightning Component instance\n\n    if (instance && isPage(instance)) {\n      app = instance;\n    }\n\n    if (!app) {\n      app = appInstance || AppInstance;\n    }\n\n    application = app.application;\n    pagesHost = application.childList;\n    stage = app.stage;\n    routerConfig = getConfigMap();\n    mixin(app);\n\n    if (isArray(routes)) {\n      setup(config);\n    } else if (isFunction(routes)) {\n      console.warn('[Router]: Calling Router.route() directly is deprecated.');\n      console.warn('Use object config: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n    }\n  };\n\n  const setup = config => {\n    if (!initialised) {\n      init(config);\n    }\n\n    config.routes.forEach(r => {\n      const path = cleanHash(r.path);\n\n      if (!routeExists(path)) {\n        const route = createRoute(r);\n        routes.set(path, route); // if route has a configured component property\n        // we store it in a different map to simplify\n        // the creating and destroying per route\n\n        if (route.component) {\n          let type = route.component;\n\n          if (isComponentConstructor(type)) {\n            if (!routerConfig.get('lazyCreate')) {\n              type = createComponent(stage, type);\n              pagesHost.a(type);\n            }\n          }\n\n          components.set(path, type);\n        }\n      } else {\n        console.error(\"\".concat(path, \" already exists in routes configuration\"));\n      }\n    });\n  };\n\n  const init = config => {\n    rootHash = config.root;\n\n    if (isFunction(config.boot)) {\n      bootRequest = config.boot;\n    }\n\n    if (isBoolean(config.updateHash)) {\n      updateHash = config.updateHash;\n    }\n\n    if (isFunction(config.beforeEachRoute)) {\n      beforeEachRoute = config.beforeEachRoute;\n    }\n\n    if (isFunction(config.afterEachRoute)) {\n      afterEachRoute = config.afterEachRoute;\n    }\n\n    if (config.bootComponent) {\n      console.warn('[Router]: Boot Component is now available as a special router: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration?id=special-routes');\n      console.warn('[Router]: setting { bootComponent } property will be deprecated in a future release');\n\n      if (isPage(config.bootComponent)) {\n        config.routes.push({\n          path: '$',\n          component: config.bootComponent,\n          // we try to assign the bootRequest as after data-provider\n          // so it will behave as any other component\n          after: bootRequest || null,\n          options: {\n            preventStorage: true\n          }\n        });\n      } else {\n        console.error(\"[Router]: \".concat(config.bootComponent, \" is not a valid boot component\"));\n      }\n    }\n\n    initialised = true;\n  };\n\n  const storeComponent = (route, type) => {\n    if (components.has(route)) {\n      components.set(route, type);\n    }\n  };\n  const getComponent = route => {\n    if (components.has(route)) {\n      return components.get(route);\n    }\n\n    return null;\n  };\n  /**\n   * Test if router needs to update browser location hash\n   * @returns {boolean}\n   */\n\n  const mustUpdateLocationHash = () => {\n    if (!routerConfig || !routerConfig.size) {\n      return false;\n    } // we need support to either turn change hash off\n    // per platform or per app\n\n\n    const updateConfig = routerConfig.get('updateHash');\n    return !(isBoolean(updateConfig) && !updateConfig || isBoolean(updateHash) && !updateHash);\n  };\n  /**\n   * Will be called when a new navigate() request has completed\n   * and has not been expired due to it's async nature\n   * @param request\n   */\n\n  const onRequestResolved = request => {\n    const hash = request.hash;\n    const route = request.route;\n    const register = request.register;\n    const page = request.page; // clean up history if modifier is set\n\n    if (getOption(route.options, 'clearHistory')) {\n      setHistory([]);\n    } else if (hash && !isWildcard.test(route.path)) {\n      updateHistory(request);\n    } // we only update the stackLocation if a route\n    // is not expired before it resolves\n\n\n    storeComponent(route.path, page);\n\n    if (request.isSharedInstance || !request.isCreated) {\n      emit(page, 'changed');\n    } else if (request.isCreated) {\n      emit(page, 'mounted');\n    } // only update widgets if we have a host\n\n\n    if (widgetsHost) {\n      updateWidgets(route.widgets, page);\n    } // we want to clean up if there is an\n    // active page that is not being shared\n    // between current and previous route\n\n\n    if (getActivePage() && !request.isSharedInstance) {\n      cleanUp(activePage, request);\n    } // provide history object to active page\n\n\n    if (register.get(symbols.historyState) && isFunction(page.historyState)) {\n      page.historyState(register.get(symbols.historyState));\n    }\n\n    setActivePage(page);\n    activeHash = request.hash;\n    activeRoute = route.path; // cleanup all cancelled requests\n\n    for (let request of navigateQueue.values()) {\n      if (request.isCancelled && request.hash) {\n        navigateQueue.delete(request.hash);\n      }\n    }\n\n    afterEachRoute(request);\n    Log$1.info('[route]:', route.path);\n    Log$1.info('[hash]:', hash);\n  };\n\n  const cleanUp = (page, request) => {\n    const route = activeRoute;\n    const register = request.register;\n    const lazyDestroy = routerConfig.get('lazyDestroy');\n    const destroyOnBack = routerConfig.get('destroyOnHistoryBack');\n    const keepAlive = register.get('keepAlive');\n    const isFromHistory = register.get(symbols.backtrack);\n    let doCleanup = false; // if this request is executed due to a step back in history\n    // and we have configured to destroy active page when we go back\n    // in history or lazyDestory is enabled\n\n    if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n      doCleanup = true;\n    } // clean up if lazyDestroy is enabled and the keepAlive flag\n    // in navigation register is false\n\n\n    if (lazyDestroy && !keepAlive) {\n      doCleanup = true;\n    } // if the current and new request share the same route blueprint\n\n\n    if (activeRoute === request.route.path) {\n      doCleanup = true;\n    }\n\n    if (doCleanup) {\n      // grab original class constructor if\n      // statemachine routed else store constructor\n      storeComponent(route, page._routedType || page.constructor); // actual remove of page from memory\n\n      pagesHost.remove(page); // force texture gc() if configured\n      // so we can cleanup textures in the same tick\n\n      if (routerConfig.get('gcOnUnload')) {\n        stage.gc();\n      }\n    } else {\n      // If we're not removing the page we need to\n      // reset it's properties\n      page.patch({\n        x: 0,\n        y: 0,\n        scale: 1,\n        alpha: 1,\n        visible: false\n      });\n    }\n  };\n\n  const getActiveHash = () => {\n    return activeHash;\n  };\n  const setActivePage = page => {\n    activePage = page;\n  };\n  const getActivePage = () => {\n    return activePage;\n  };\n  const getActiveRoute = () => {\n    return activeRoute;\n  };\n  const getLastHash = () => {\n    return lastAcceptedHash;\n  };\n  const setLastHash = hash => {\n    lastAcceptedHash = hash;\n  };\n  const getPreviousState = () => {\n    return previousState;\n  };\n  const routeExists = key => {\n    return routes.has(key);\n  };\n  const getRootHash = () => {\n    return rootHash;\n  };\n  const getBootRequest = () => {\n    return bootRequest;\n  };\n  const getRouterConfig = () => {\n    return routerConfig;\n  };\n  const getRoutes = () => {\n    return routes;\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const isFunction = v => {\n    return typeof v === 'function';\n  };\n  const isObject = v => {\n    return typeof v === 'object' && v !== null;\n  };\n  const isBoolean = v => {\n    return typeof v === 'boolean';\n  };\n  const isPage = v => {\n    if (v instanceof Lightning$1.Element || isComponentConstructor(v)) {\n      return true;\n    }\n\n    return false;\n  };\n  const isComponentConstructor = type => {\n    return type.prototype && 'isComponent' in type.prototype;\n  };\n  const isArray = v => {\n    return Array.isArray(v);\n  };\n  const ucfirst = v => {\n    return \"\".concat(v.charAt(0).toUpperCase()).concat(v.slice(1));\n  };\n  const isString = v => {\n    return typeof v === 'string';\n  };\n  const isPromise = method => {\n    let result;\n\n    if (isFunction(method)) {\n      try {\n        result = method.apply(null);\n      } catch (e) {\n        result = e;\n      }\n    } else {\n      result = method;\n    }\n\n    return isObject(result) && isFunction(result.then);\n  };\n  const cleanHash = function () {\n    let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return hash.replace(/^#/, '').replace(/\\/+$/, '');\n  };\n  const getConfigMap = () => {\n    const routerSettings = Settings$1.get('platform', 'router');\n    const isObj = isObject(routerSettings);\n    return ['backtrack', 'gcOnUnload', 'destroyOnHistoryBack', 'lazyCreate', 'lazyDestroy', 'reuseInstance', 'autoRestoreRemote', 'numberNavigation', 'updateHash', 'storeSameHash'].reduce((config, key) => {\n      config.set(key, isObj ? routerSettings[key] : Settings$1.get('platform', key));\n      return config;\n    }, new Map());\n  };\n  const getQueryStringParams = function () {\n    let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActiveHash();\n    const resumeHash = getResumeHash();\n\n    if ((hash === '$' || !hash) && resumeHash) {\n      if (isString(resumeHash)) {\n        hash = resumeHash;\n      }\n    }\n\n    let parse = '';\n    const getQuery = /([?&].*)/;\n    const matches = getQuery.exec(hash);\n    const params = {};\n\n    if (document.location && document.location.search) {\n      parse = document.location.search;\n    }\n\n    if (matches && matches.length) {\n      let hashParams = matches[1];\n\n      if (parse) {\n        // if location.search is not empty we\n        // remove the leading ? to create a\n        // valid string\n        hashParams = hashParams.replace(/^\\?/, ''); // we parse hash params last so they we can always\n        // override search params with hash params\n\n        parse = \"\".concat(parse, \"&\").concat(hashParams);\n      } else {\n        parse = hashParams;\n      }\n    }\n\n    if (parse) {\n      const urlParams = new URLSearchParams(parse);\n\n      for (const [key, value] of urlParams.entries()) {\n        params[key] = value;\n      }\n\n      return params;\n    } else {\n      return false;\n    }\n  };\n  const objectToQueryString = obj => {\n    if (!isObject(obj)) {\n      return '';\n    }\n\n    return '?' + Object.keys(obj).map(key => {\n      return \"\".concat(key, \"=\").concat(obj[key]);\n    }).join('&');\n  };\n  const symbols = {\n    route: Symbol('route'),\n    hash: Symbol('hash'),\n    store: Symbol('store'),\n    fromHistory: Symbol('fromHistory'),\n    expires: Symbol('expires'),\n    resume: Symbol('resume'),\n    backtrack: Symbol('backtrack'),\n    historyState: Symbol('historyState'),\n    queryParams: Symbol('queryParams')\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const dataHooks = {\n    on: request => {\n      app.state || '';\n\n      app._setState('Loading');\n\n      return execProvider(request);\n    },\n    before: request => {\n      return execProvider(request);\n    },\n    after: request => {\n      try {\n        execProvider(request, true);\n      } catch (e) {// for now we fail silently\n      }\n\n      return Promise.resolve();\n    }\n  };\n\n  const execProvider = (request, emitProvided) => {\n    const route = request.route;\n    const provider = route.provider;\n    const expires = route.cache ? route.cache * 1000 : 0;\n    const params = addPersistData(request);\n    return provider.request(request.page, { ...params\n    }).then(() => {\n      request.page[symbols.expires] = Date.now() + expires;\n\n      if (emitProvided) {\n        emit(request.page, 'dataProvided');\n      }\n    }).catch(e => {\n      request.page[symbols.expires] = Date.now();\n      throw e;\n    });\n  };\n\n  const addPersistData = _ref => {\n    let {\n      page,\n      route,\n      hash,\n      register = new Map()\n    } = _ref;\n    const urlValues = getValuesFromHash(hash, route.path);\n    const queryParams = getQueryStringParams(hash);\n    const pageData = new Map([...urlValues, ...register]);\n    const params = {}; // make dynamic url data available to the page\n    // as instance properties\n\n    for (let [name, value] of pageData) {\n      params[name] = value;\n    }\n\n    if (queryParams) {\n      params[symbols.queryParams] = queryParams;\n    } // check navigation register for persistent data\n\n\n    if (register.size) {\n      const obj = {};\n\n      for (let [k, v] of register) {\n        obj[k] = v;\n      }\n\n      page.persist = obj;\n    } // make url data and persist data available\n    // via params property\n\n\n    page.params = params;\n    emit(page, ['urlParams'], params);\n    return params;\n  };\n  /**\n   * Test if page passed cache-time\n   * @param page\n   * @returns {boolean}\n   */\n\n  const isPageExpired = page => {\n    if (!page[symbols.expires]) {\n      return false;\n    }\n\n    const expires = page[symbols.expires];\n    const now = Date.now();\n    return now >= expires;\n  };\n  const hasProvider = path => {\n    if (routeExists(path)) {\n      const record = routes.get(path);\n      return !!record.provider;\n    }\n\n    return false;\n  };\n  const getProvider = route => {\n    // @todo: fix, route already is passed in\n    if (routeExists(route.path)) {\n      const {\n        provider\n      } = routes.get(route.path);\n      return {\n        type: provider.type,\n        provider: provider.request\n      };\n    }\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  const fade = (i, o) => {\n    return new Promise(resolve => {\n      i.patch({\n        alpha: 0,\n        visible: true,\n        smooth: {\n          alpha: [1, {\n            duration: 0.5,\n            delay: 0.1\n          }]\n        }\n      }); // resolve on y finish\n\n      i.transition('alpha').on('finish', () => {\n        if (o) {\n          o.visible = false;\n        }\n\n        resolve();\n      });\n    });\n  };\n\n  const crossFade = (i, o) => {\n    return new Promise(resolve => {\n      i.patch({\n        alpha: 0,\n        visible: true,\n        smooth: {\n          alpha: [1, {\n            duration: 0.5,\n            delay: 0.1\n          }]\n        }\n      });\n\n      if (o) {\n        o.patch({\n          smooth: {\n            alpha: [0, {\n              duration: 0.5,\n              delay: 0.3\n            }]\n          }\n        });\n      } // resolve on y finish\n\n\n      i.transition('alpha').on('finish', () => {\n        resolve();\n      });\n    });\n  };\n\n  const moveOnAxes = (axis, direction, i, o) => {\n    const bounds = axis === 'x' ? 1920 : 1080;\n    return new Promise(resolve => {\n      i.patch({\n        [\"\".concat(axis)]: direction ? bounds * -1 : bounds,\n        visible: true,\n        smooth: {\n          [\"\".concat(axis)]: [0, {\n            duration: 0.4,\n            delay: 0.2\n          }]\n        }\n      }); // out is optional\n\n      if (o) {\n        o.patch({\n          [\"\".concat(axis)]: 0,\n          smooth: {\n            [\"\".concat(axis)]: [direction ? bounds : bounds * -1, {\n              duration: 0.4,\n              delay: 0.2\n            }]\n          }\n        });\n      } // resolve on y finish\n\n\n      i.transition(axis).on('finish', () => {\n        resolve();\n      });\n    });\n  };\n\n  const up = (i, o) => {\n    return moveOnAxes('y', 0, i, o);\n  };\n\n  const down = (i, o) => {\n    return moveOnAxes('y', 1, i, o);\n  };\n\n  const left = (i, o) => {\n    return moveOnAxes('x', 0, i, o);\n  };\n\n  const right = (i, o) => {\n    return moveOnAxes('x', 1, i, o);\n  };\n\n  var Transitions = {\n    fade,\n    crossFade,\n    up,\n    down,\n    left,\n    right\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /**\n   * execute transition between new / old page and\n   * toggle the defined widgets\n   * @todo: platform override default transition\n   * @param pageIn\n   * @param pageOut\n   */\n\n  const executeTransition = function (pageIn) {\n    let pageOut = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    const transition = pageIn.pageTransition || pageIn.easing;\n    const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition);\n    const transitionsDisabled = getRouterConfig().get('disableTransitions');\n\n    if (pageIn.easing) {\n      console.warn('easing() method is deprecated and will be removed. Use pageTransition()');\n    } // default behaviour is a visibility toggle\n\n\n    if (!hasCustomTransitions || transitionsDisabled) {\n      pageIn.visible = true;\n\n      if (pageOut) {\n        pageOut.visible = false;\n      }\n\n      return Promise.resolve();\n    }\n\n    if (transition) {\n      let type;\n\n      try {\n        type = transition.call(pageIn, pageIn, pageOut);\n      } catch (e) {\n        type = 'crossFade';\n      }\n\n      if (isPromise(type)) {\n        return type;\n      }\n\n      if (isString(type)) {\n        const fn = Transitions[type];\n\n        if (fn) {\n          return fn(pageIn, pageOut);\n        }\n      } // keep backwards compatible for now\n\n\n      if (pageIn.smoothIn) {\n        // provide a smooth function that resolves itself\n        // on transition finish\n        const smooth = function (p, v) {\n          let args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          return new Promise(resolve => {\n            pageIn.visible = true;\n            pageIn.setSmooth(p, v, args);\n            pageIn.transition(p).on('finish', () => {\n              resolve();\n            });\n          });\n        };\n\n        return pageIn.smoothIn({\n          pageIn,\n          smooth\n        });\n      }\n    }\n\n    return Transitions.crossFade(pageIn, pageOut);\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /**\n   * The actual loading of the component\n   * */\n\n  const load = async request => {\n    let expired = false;\n\n    try {\n      request = await loader(request);\n\n      if (request && !request.isCancelled) {\n        // in case of on() providing we need to reset\n        // app state;\n        if (app.state === 'Loading') {\n          if (getPreviousState() === 'Widgets') ; else {\n            app._setState('');\n          }\n        } // Do page transition if instance\n        // is not shared between the routes\n\n\n        if (!request.isSharedInstance && !request.isCancelled) {\n          await executeTransition(request.page, getActivePage());\n        }\n      } else {\n        expired = true;\n      } // on expired we only cleanup\n\n\n      if (expired || request.isCancelled) {\n        Log$1.debug('[router]:', \"Rejected \".concat(request.hash, \" because route to \").concat(getLastHash(), \" started\"));\n\n        if (request.isCreated && !request.isSharedInstance) {\n          // remove from render-tree\n          pagesHost.remove(request.page);\n        }\n      } else {\n        onRequestResolved(request); // resolve promise\n\n        return request.page;\n      }\n    } catch (request) {\n      if (!request.route) {\n        console.error(request);\n      } else if (!expired) {\n        // @todo: revisit\n        const {\n          route\n        } = request; // clean up history if modifier is set\n\n        if (getOption(route.options, 'clearHistory')) {\n          setHistory([]);\n        } else if (!isWildcard.test(route.path)) {\n          updateHistory(request);\n        }\n\n        if (request.isCreated && !request.isSharedInstance) {\n          // remove from render-tree\n          pagesHost.remove(request.page);\n        }\n\n        handleError(request);\n      }\n    }\n  };\n\n  const loader = async request => {\n    const route = request.route;\n    const hash = request.hash;\n    const register = request.register; // todo: grab from Route instance\n\n    let type = getComponent(route.path);\n    let isConstruct = isComponentConstructor(type);\n    let provide = false; // if it's an instance bt we're not coming back from\n    // history we test if we can re-use this instance\n\n    if (!isConstruct && !register.get(symbols.backtrack)) {\n      if (!mustReuse(route)) {\n        type = type.constructor;\n        isConstruct = true;\n      }\n    } // If page is Lightning Component instance\n\n\n    if (!isConstruct) {\n      request.page = type; // if we have have a data route for current page\n\n      if (hasProvider(route.path)) {\n        if (isPageExpired(type) || type[symbols.hash] !== hash) {\n          provide = true;\n        }\n      }\n\n      let currentRoute = getActivePage() && getActivePage()[symbols.route]; // if the new route is equal to the current route it means that both\n      // route share the Component instance and stack location / since this case\n      // is conflicting with the way before() and after() loading works we flag it,\n      // and check platform settings in we want to re-use instance\n\n      if (route.path === currentRoute) {\n        request.isSharedInstance = true; // since we're re-using the instance we must attach\n        // historyState to the request to prevent it from\n        // being overridden.\n\n        if (isFunction(request.page.historyState)) {\n          request.copiedHistoryState = request.page.historyState();\n        }\n      }\n    } else {\n      request.page = createComponent(stage, type);\n      pagesHost.a(request.page); // test if need to request data provider\n\n      if (hasProvider(route.path)) {\n        provide = true;\n      }\n\n      request.isCreated = true;\n    } // we store hash and route as properties on the page instance\n    // that way we can easily calculate new behaviour on page reload\n\n\n    request.page[symbols.hash] = hash;\n    request.page[symbols.route] = route.path;\n\n    try {\n      if (provide) {\n        // extract attached data-provider for route\n        // we're processing\n        const {\n          type: loadType,\n          provider\n        } = getProvider(route); // update running request\n\n        request.provider = provider;\n        request.providerType = loadType;\n        await dataHooks[loadType](request); // we early exit if the current request is expired\n\n        if (hash !== getLastHash()) {\n          return false;\n        } else {\n          if (request.providerType !== 'after') {\n            emit(request.page, 'dataProvided');\n          } // resolve promise\n\n\n          return request;\n        }\n      } else {\n        addPersistData(request);\n        return request;\n      }\n    } catch (e) {\n      request.error = e;\n      return Promise.reject(request);\n    }\n  };\n\n  const handleError = request => {\n    if (request && request.error) {\n      console.error(request.error);\n    } else if (request) {\n      Log$1.error(request);\n    }\n\n    if (request.page && routeExists('!')) {\n      navigate('!', {\n        request\n      }, false);\n    }\n  };\n\n  const mustReuse = route => {\n    const opt = getOption(route.options, 'reuseInstance');\n    const config = routerConfig.get('reuseInstance'); // route always has final decision\n\n    if (isBoolean(opt)) {\n      return opt;\n    }\n\n    return !(isBoolean(config) && config === false);\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class RoutedApp extends Lightning$1.Component {\n    static _template() {\n      return {\n        Pages: {\n          forceZIndexContext: true\n        },\n\n        /**\n         * This is a default Loading page that will be made visible\n         * during data-provider on() you CAN override in child-class\n         */\n        Loading: {\n          rect: true,\n          w: 1920,\n          h: 1080,\n          color: 0xff000000,\n          visible: false,\n          zIndex: 99,\n          Label: {\n            mount: 0.5,\n            x: 960,\n            y: 540,\n            text: {\n              text: 'Loading..'\n            }\n          }\n        }\n      };\n    }\n\n    static _states() {\n      return [class Loading extends this {\n        $enter() {\n          this.tag('Loading').visible = true;\n        }\n\n        $exit() {\n          this.tag('Loading').visible = false;\n        }\n\n      }, class Widgets extends this {\n        $enter(args, widget) {\n          // store widget reference\n          this._widget = widget; // since it's possible that this behaviour\n          // is non-remote driven we force a recalculation\n          // of the focuspath\n\n          this._refocus();\n        }\n\n        _getFocused() {\n          // we delegate focus to selected widget\n          // so it can consume remotecontrol presses\n          return this._widget;\n        } // if we want to widget to widget focus delegation\n\n\n        reload(widget) {\n          this._widget = widget;\n\n          this._refocus();\n        }\n\n        _handleKey() {\n          const restoreFocus = routerConfig.get('autoRestoreRemote');\n          /**\n           * The Router used to delegate focus back to the page instance on\n           * every unhandled key. This is barely usefull in any situation\n           * so for now we offer the option to explicity turn that behaviour off\n           * so we don't don't introduce a breaking change.\n           */\n\n          if (!isBoolean(restoreFocus) || restoreFocus === true) {\n            Router.focusPage();\n          }\n        }\n\n      }];\n    }\n    /**\n     * Return location where pages need to be stored\n     */\n\n\n    get pages() {\n      return this.tag('Pages');\n    }\n    /**\n     * Tell router where widgets are stored\n     */\n\n\n    get widgets() {\n      return this.tag('Widgets');\n    }\n    /**\n     * we MUST register _handleBack method so the Router\n     * can override it\n     * @private\n     */\n\n\n    _handleBack() {}\n    /**\n     * We MUST return Router.activePage() so the new Page\n     * can listen to the remote-control.\n     */\n\n\n    _getFocused() {\n      return Router.getActivePage();\n    }\n\n  }\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  /*\n  rouThor ==[x]\n   */\n\n  let navigateQueue = new Map();\n  let forcedHash = '';\n  let resumeHash = '';\n  /**\n   * Start routing the app\n   * @param config - route config object\n   * @param instance - instance of the app\n   */\n\n  const startRouter = (config, instance) => {\n    bootRouter(config, instance);\n    registerListener();\n    start();\n  }; // start translating url\n\n\n  const start = () => {\n    let hash = (getHash() || '').replace(/^#/, '');\n    const bootKey = '$';\n    const params = getQueryStringParams(hash);\n    const bootRequest = getBootRequest();\n    const rootHash = getRootHash();\n    const isDirectLoad = hash.indexOf(bootKey) !== -1; // prevent direct reload of wildcard routes\n    // expect bootComponent\n\n    if (isWildcard.test(hash) && hash !== bootKey) {\n      hash = '';\n    } // store resume point for manual resume\n\n\n    resumeHash = isDirectLoad ? rootHash : hash || rootHash;\n\n    const ready = () => {\n      if (!hash && rootHash) {\n        if (isString(rootHash)) {\n          navigate(rootHash);\n        } else if (isFunction(rootHash)) {\n          rootHash().then(res => {\n            if (isObject(res)) {\n              navigate(res.path, res.params);\n            } else {\n              navigate(res);\n            }\n          });\n        }\n      } else {\n        queue(hash);\n        handleHashChange().then(() => {\n          app._refocus();\n        }).catch(e => {\n          console.error(e);\n        });\n      }\n    };\n\n    if (routeExists(bootKey)) {\n      if (hash && !isDirectLoad) {\n        if (!getRouteByHash(hash)) {\n          navigate('*', {\n            failedHash: hash\n          });\n          return;\n        }\n      }\n\n      navigate(bootKey, {\n        resume: resumeHash,\n        reload: bootKey === hash\n      }, false);\n    } else if (isFunction(bootRequest)) {\n      bootRequest(params).then(() => {\n        ready();\n      }).catch(e => {\n        handleBootError(e);\n      });\n    } else {\n      ready();\n    }\n  };\n\n  const handleBootError = e => {\n    if (routeExists('!')) {\n      navigate('!', {\n        request: {\n          error: e\n        }\n      });\n    } else {\n      console.error(e);\n    }\n  };\n  /**\n   * start a new request\n   * @param url\n   * @param args\n   * @param store\n   */\n\n\n  const navigate = function (url) {\n    let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let store = arguments.length > 2 ? arguments[2] : undefined;\n\n    if (isObject(url)) {\n      url = getHashByName(url);\n\n      if (!url) {\n        return;\n      }\n    }\n\n    let hash = getHash();\n\n    if (!mustUpdateLocationHash() && forcedHash) {\n      hash = forcedHash;\n    }\n\n    if (hash.replace(/^#/, '') !== url) {\n      // push request in the queue\n      queue(url, args, store);\n\n      if (mustUpdateLocationHash()) {\n        setHash(url);\n      } else {\n        forcedHash = url;\n        handleHashChange(url).then(() => {\n          app._refocus();\n        }).catch(e => {\n          console.error(e);\n        });\n      }\n    } else if (args.reload) {\n      // push request in the queue\n      queue(url, args, store);\n      handleHashChange(url).then(() => {\n        app._refocus();\n      }).catch(e => {\n        console.error(e);\n      });\n    }\n  };\n\n  const queue = function (hash) {\n    let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let store = arguments.length > 2 ? arguments[2] : undefined;\n    hash = cleanHash(hash);\n\n    if (!navigateQueue.has(hash)) {\n      for (let request of navigateQueue.values()) {\n        request.cancel();\n      }\n\n      const request = createRequest(hash, args, store);\n      navigateQueue.set(decodeURIComponent(hash), request);\n      return request;\n    }\n\n    return false;\n  };\n  /**\n   * Handle change of hash\n   * @param override\n   * @returns {Promise<void>}\n   */\n\n\n  const handleHashChange = async override => {\n    const hash = cleanHash(override || getHash());\n    const queueId = decodeURIComponent(hash);\n    let request = navigateQueue.get(queueId); // handle hash updated manually\n\n    if (!request && !navigateQueue.size) {\n      request = queue(hash);\n    }\n\n    const route = getRouteByHash(hash);\n\n    if (!route) {\n      if (routeExists('*')) {\n        navigate('*', {\n          failedHash: hash\n        });\n      } else {\n        console.error(\"Unable to navigate to: \".concat(hash));\n      }\n\n      return;\n    } // update current processed request\n\n\n    request.hash = hash;\n    request.route = route;\n    let result = await beforeEachRoute(getActiveHash(), request); // test if a local hook is configured for the route\n\n    if (result && route.beforeNavigate) {\n      result = await route.beforeNavigate(getActiveHash(), request);\n    }\n\n    if (isBoolean(result)) {\n      // only if resolve value is explicitly true\n      // we continue the current route request\n      if (result) {\n        return resolveHashChange(request);\n      }\n    } else {\n      // if navigation guard didn't return true\n      // we cancel the current request\n      request.cancel();\n      navigateQueue.delete(queueId);\n\n      if (isString(result)) {\n        navigate(result);\n      } else if (isObject(result)) {\n        let store = true;\n\n        if (isBoolean(result.store)) {\n          store = result.store;\n        }\n\n        navigate(result.path, result.params, store);\n      }\n    }\n  };\n  /**\n   * Continue processing the hash change if not blocked\n   * by global or local hook\n   * @param request - {}\n   */\n\n\n  const resolveHashChange = request => {\n    const hash = request.hash;\n    const route = request.route;\n    const queueId = decodeURIComponent(hash); // store last requested hash so we can\n    // prevent a route that resolved later\n    // from displaying itself\n\n    setLastHash(hash);\n\n    if (route.path) {\n      const component = getComponent(route.path); // if a hook is provided for the current route\n\n      if (isFunction(route.hook)) {\n        const urlParams = getValuesFromHash(hash, route.path);\n        const params = {};\n\n        for (const key of urlParams.keys()) {\n          params[key] = urlParams.get(key);\n        }\n\n        route.hook(app, { ...params\n        });\n      } // if there is a component attached to the route\n\n\n      if (component) {\n        // force page to root state to prevent shared state issues\n        const activePage = getActivePage();\n\n        if (activePage) {\n          const keepAlive = keepActivePageAlive(getActiveRoute(), request);\n\n          if (activePage && route.path === getActiveRoute() && !keepAlive) {\n            activePage._setState('');\n          }\n        }\n\n        if (isPage(component)) {\n          load(request).then(() => {\n            app._refocus();\n\n            navigateQueue.delete(queueId);\n          });\n        } else {\n          // of the component is not a constructor\n          // or a Component instance we can assume\n          // that it's a dynamic import\n          component().then(contents => {\n            return contents.default;\n          }).then(module => {\n            storeComponent(route.path, module);\n            return load(request);\n          }).then(() => {\n            app._refocus();\n\n            navigateQueue.delete(queueId);\n          });\n        }\n      } else {\n        navigateQueue.delete(queueId);\n      }\n    }\n  };\n  /**\n   * Directional step in history\n   * @param level\n   */\n\n\n  const step = function () {\n    let level = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (!level || isNaN(level)) {\n      return false;\n    }\n\n    const history = getHistory(); // for now we only support negative numbers\n\n    level = Math.abs(level); // we can't step back past the amount\n    // of history entries\n\n    if (level > history.length) {\n      if (isFunction(app._handleAppClose)) {\n        return app._handleAppClose();\n      }\n\n      return app.application.closeApp();\n    } else if (history.length) {\n      // for now we only support history back\n      const route = history.splice(history.length - level, level)[0]; // store changed history\n\n      setHistory(history);\n      return navigate(route.hash, {\n        [symbols.backtrack]: true,\n        [symbols.historyState]: route.state\n      }, false);\n    } else if (routerConfig.get('backtrack')) {\n      const hashLastPart = /(\\/:?[\\w%\\s-]+)$/;\n      let hash = stripRegex(getHash());\n      let floor = getFloor(hash); // test if we got deep-linked\n\n      if (floor > 1) {\n        while (floor--) {\n          // strip of last part\n          hash = hash.replace(hashLastPart, ''); // if we have a configured route\n          // we navigate to it\n\n          if (getRouteByHash(hash)) {\n            return navigate(hash, {\n              [symbols.backtrack]: true\n            }, false);\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n  /**\n   * Resume Router's page loading process after\n   * the BootComponent became visible;\n   */\n\n  const resume = () => {\n    if (isString(resumeHash)) {\n      navigate(resumeHash, false);\n      resumeHash = '';\n    } else if (isFunction(resumeHash)) {\n      resumeHash().then(res => {\n        resumeHash = '';\n\n        if (isObject(res)) {\n          navigate(res.path, res.params);\n        } else {\n          navigate(res);\n        }\n      });\n    } else {\n      console.warn('[Router]: resume() called but no hash found');\n    }\n  };\n  /**\n   * Force reload active hash\n   */\n\n\n  const reload = () => {\n    if (!isNavigating()) {\n      const hash = getActiveHash();\n      navigate(hash, {\n        reload: true\n      }, false);\n    }\n  };\n  /**\n   * Query if the Router is still processing a Request\n   * @returns {boolean}\n   */\n\n\n  const isNavigating = () => {\n    if (navigateQueue.size) {\n      let isProcessing = false;\n\n      for (let request of navigateQueue.values()) {\n        if (!request.isCancelled) {\n          isProcessing = true;\n        }\n      }\n\n      return isProcessing;\n    }\n\n    return false;\n  };\n\n  const getResumeHash = () => {\n    return resumeHash;\n  };\n  /**\n   * By default we return the location hash\n   * @returns {string}\n   */\n\n  let getHash = () => {\n    return document.location.hash;\n  };\n  /**\n   * Update location hash\n   * @param url\n   */\n\n\n  let setHash = url => {\n    document.location.hash = url;\n  };\n  /**\n   * This can be called from the platform / bootstrapper to override\n   * the default getting and setting of the hash\n   * @param config\n   */\n\n\n  const initRouter = config => {\n    if (config.getHash) {\n      getHash = config.getHash;\n    }\n\n    if (config.setHash) {\n      setHash = config.setHash;\n    }\n  };\n  /**\n   * On hash change we start processing\n   */\n\n  const registerListener = () => {\n    Registry.addEventListener(window, 'hashchange', async () => {\n      if (mustUpdateLocationHash()) {\n        try {\n          await handleHashChange();\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    });\n  };\n  /**\n   * Navigate to root hash\n   */\n\n\n  const root = () => {\n    const rootHash = getRootHash();\n\n    if (isString(rootHash)) {\n      navigate(rootHash);\n    } else if (isFunction(rootHash)) {\n      rootHash().then(res => {\n        if (isObject(res)) {\n          navigate(res.path, res.params);\n        } else {\n          navigate(res);\n        }\n      });\n    }\n  }; // export API\n\n\n  var Router = {\n    startRouter,\n    navigate,\n    resume,\n    step,\n    go: step,\n    back: step.bind(null, -1),\n    activePage: getActivePage,\n\n    getActivePage() {\n      // warning\n      return getActivePage();\n    },\n\n    getActiveRoute,\n    getActiveHash,\n    focusWidget,\n    getActiveWidget,\n    restoreFocus,\n    isNavigating,\n    getHistory,\n    setHistory,\n    getHistoryState,\n    replaceHistoryState,\n    getQueryStringParams,\n    reload,\n    symbols,\n    App: RoutedApp,\n    // keep backwards compatible\n    focusPage: restoreFocus,\n    root: root,\n\n    /**\n     * Deprecated api methods\n     */\n    setupRoutes() {\n      console.warn('Router: setupRoutes is deprecated, consolidate your configuration');\n      console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n    },\n\n    on() {\n      console.warn('Router.on() is deprecated, consolidate your configuration');\n      console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n    },\n\n    before() {\n      console.warn('Router.before() is deprecated, consolidate your configuration');\n      console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n    },\n\n    after() {\n      console.warn('Router.after() is deprecated, consolidate your configuration');\n      console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n    }\n\n  };\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  let ApplicationInstance;\n  var Launch = ((App, appSettings, platformSettings, appData) => {\n    initSettings(appSettings, platformSettings);\n    initUtils(platformSettings);\n    initStorage(); // Initialize plugins\n\n    if (platformSettings.plugins) {\n      platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile);\n      platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics);\n      platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer);\n      platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer);\n      platformSettings.plugins.ads && initAds(platformSettings.plugins.ads);\n      platformSettings.plugins.router && initRouter(platformSettings.plugins.router);\n      platformSettings.plugins.tv && initTV(platformSettings.plugins.tv);\n      platformSettings.plugins.purchase && initPurchase(platformSettings.plugins.purchase);\n      platformSettings.plugins.pin && initPin(platformSettings.plugins.pin);\n    }\n\n    const app = Application(App, appData, platformSettings);\n    initLightningSdkPlugin.log = Log$1;\n    initLightningSdkPlugin.settings = Settings$1;\n    initLightningSdkPlugin.ads = Ads;\n    initLightningSdkPlugin.lightning = Lightning$1;\n    ApplicationInstance = new app(appSettings);\n    initLightningSdkPlugin.appInstance = ApplicationInstance;\n    return ApplicationInstance;\n  });\n\n  /*\n   * If not stated otherwise in this file or this component's LICENSE file the\n   * following copyright and licenses apply:\n   *\n   * Copyright 2020 Metrological\n   *\n   * Licensed under the Apache License, Version 2.0 (the License);\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n  class App extends Lightning$1.Component {\n    static getFonts() {\n      return [{\n        family: 'Regular',\n        url: Utils.asset('fonts/Roboto-Regular.ttf')\n      }];\n    }\n\n    static _template() {\n      return {\n        Background: {\n          w: 1920,\n          h: 1080,\n          color: 0xfffbb03b,\n          src: Utils.asset('images/background.png')\n        },\n        Logo: {\n          mountX: 0.5,\n          mountY: 1,\n          x: 960,\n          y: 600,\n          src: Utils.asset('images/logo.png')\n        },\n        Text: {\n          mount: 0.5,\n          x: 960,\n          y: 720,\n          text: {\n            text: \"Let's start Building!\",\n            fontFace: 'Regular',\n            fontSize: 64,\n            textColor: 0xbbffffff\n          }\n        }\n      };\n    }\n\n    _init() {\n      this.tag('Background').animation({\n        duration: 15,\n        repeat: -1,\n        actions: [{\n          t: '',\n          p: 'color',\n          v: {\n            0: {\n              v: 0xfffbb03b\n            },\n            0.5: {\n              v: 0xfff46730\n            },\n            0.8: {\n              v: 0xfffbb03b\n            }\n          }\n        }]\n      }).start();\n    }\n\n  }\n\n  function index () {\n    return Launch(App, ...arguments);\n  }\n\n  return index;\n\n})();\n"],"names":[],"version":3,"file":"index.502008c6.js.map","sourceRoot":"/__parcel_source_root/"}